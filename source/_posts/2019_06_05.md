---
title: KAFKA单机器单节点部署
date: 2019-06-05
tags: KAFKA
categories: KAFKA
---

### 概述
> Kafka是最初由Linkedin公司开发，是一个分布式、分区的、多副本的、多订阅者，基于zookeeper协调的分布式日志系统（也可以当做MQ系统），常见可以用于web/nginx日志、访问日志，消息服务等等，Linkedin于2010年贡献给了Apache基金会并成为顶级开源项目。

> 主要应用场景是：日志收集系统和消息系统。

Kafka主要设计目标如下：
1. 以时间复杂度为O(1)的方式提供消息持久化能力，即使对TB级以上数据也能保证常数时间的访问性能。
2. 高吞吐率。即使在非常廉价的商用机器上也能做到单机支持每秒100K条消息的传输。
3. 支持Kafka Server间的消息分区，及分布式消费，同时保证每个partition内的消息顺序传输。
4. 同时支持离线数据处理和实时数据处理。
5. Scale out:支持在线水平扩展


### 下载安装
下载地址：http://kafka.apache.org/downloads.html
直接下载解压即可

### 启动

启动zookeeper
*前提：如果安装了zookeeper则需要启动zookeeper，这样就不需要启动KAFKA自带的zookeeper了*
```
sh bin/zookeeper-server-start.sh config/zookeeper.properties &
```

启动KAFKA
```
kafka配置文件：/config/zookeeper.properties中包含了zookeeper的监听地址：
    zookeeper.connect=127.0.0.1:2181
配置中其他主要信息：
    broker.id=0
    listeners=PLAINTEXT://:9092

sh bin/kafka-server-start.sh config/server.properties
守护进程后台启动：
sh bin/kafka-server-start.sh config/server.properties 1>/dev/null 2>&1 &
```

启动生产者
```
sh bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test
```

启动消费者
```
0.90版本之前启动方式：
sh bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning
0.90版本之后启动方式：
bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning
```

> 生产者窗口发送消息，消费者窗口接收消息

