---
title: ab测试
date: 2019-04-14
tags: 测试
categories: 接口测试
---
对于服务端开发而言，接口的测试是必不可少的，尤其是对于接口的压力测试，对于高并发的承受能力等。
接口测试一般使用postman测试即可，本文暂不详解，后续再更新说明吧。

网传postman也可以进行压力测试，本人就亲自去试了一把，果然出人意料啊，一传十、十传百，根本就不是大家说的那样啊。
> postman只是进行简单的接口测试
> postman有个runnner功能，可以进行压力测试，但是不支持并发测试，其中的多次测试都是串行执行的


*那么接口的压力测试呢，目前行业内有很多工具支持，如Jmeter、Loadrunner、ab等.*
*网上说了很多的测试工具，其中ab工具是最直接最简单的，所以本文针对ab测试展开讨论。*

#### ab工具的简单介绍
```
ab全称为：apache bench
在apache官网的介绍如下：
ab是Apache超文本传输协议(HTTP)的性能测试工具。其设计意图是描绘当前所安装的Apache的执行性能，主要是显示你安装的Apache每秒可以处理多少个请求。
```

#### ab工具的安装
```
mac的安装：
	mac下本身系统就自带了apache，所以可以直接使用ab工具，使用mac的有钱大佬可以跳过安装直接往下看了。
ubuntu系统：
	使用apt命令直接安装即可
	sudo apt install apache2-utils
centos系统：
	使用yum命令直接安装即可
	yum -y install httpd-tools
windows系统：
	在官网下载，傻瓜式安装即可
	https://www.apachehaus.com/cgi-bin/download.plx
```

#### ab工具的使用
```
ab -n 100 -c 10 https://www.baidu.com
```

#### ab工具的参数
```
ab:  http请求
abs: https请求
-n:  请求总次数
-c:  并发用户数
-T:  内容类型，一般和-p -起使用（Content-Type）
-p:  包含POST参数的文件或数据
-C:  cookie参数
```

如果请求数过大失败显示连接数被限制了，解决
```
ulimit -n 65535
```

#### ab测试后的参数说明
```
request pre second: 吞吐率
    计算公式：总请求数/处理完所有请求花费的时间
    request pre second = complete requests / time taken for tests

complete requests: 总请求数

time taken for tests 处理完请求花费的时间

concurrency level: 并发用户数
    要区分并发用户数与并发连接数，一个用户可能存在多个连接数

time pre request: 用户平均请求等待时间
    计算公式：处理完所有请求花费的时间 / （总请求数/并发用户数）
    time pre request = time taken for tests / (complete request / concurrency level)

time pre request: across all concurrent requests 服务器平均请求等待时间
    计算公式：处理完所有请求花费的时间 / 总请求数
    time taken for tests / complete requests

```