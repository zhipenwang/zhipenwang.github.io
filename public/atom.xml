<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>王志鹏</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhipenwang.github.io/"/>
  <updated>2018-07-01T02:34:09.590Z</updated>
  <id>https://zhipenwang.github.io/</id>
  
  <author>
    <name>王志鹏</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>PHP设计模式之行为型模式（behavioral patterns）</title>
    <link href="https://zhipenwang.github.io/2018/07/01/behavioral_patterns/"/>
    <id>https://zhipenwang.github.io/2018/07/01/behavioral_patterns/</id>
    <published>2018-07-01T02:31:03.862Z</published>
    <updated>2018-07-01T02:34:09.590Z</updated>
    
    <content type="html"><![CDATA[<h3 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h3><blockquote><p>为请求创建了一个接收者对象的链<br>这种模式给予请求的类型，对请求的发送者和接收者进行解耦<br><strong>优点：</strong>  </p><ol><li>降低耦合度。它将请求的发送者和接收者解耦。 </li><li>简化了对象。使得对象不需要知道链的结构。 </li><li>增强给对象指派职责的灵活性。通过改变链内的成员或者调动它们的次序，允许动态地新增或者删除责任。 </li><li>增加新的请求处理类很方便。</li></ol><p><strong>缺点：</strong></p><ol><li>不能保证请求一定被接收。 </li><li>系统性能将受到一定影响，而且在进行代码调试时不太方便，可能会造成循环调用。 </li><li>可能不容易观察运行时的特征，有碍于除错</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 责任链模式  -- responsibility pattern</div><div class="line"> */</div><div class="line">abstract class Responsibility</div><div class="line">&#123;</div><div class="line">protected $next;</div><div class="line">public function setNext(Responsibility $obj)</div><div class="line">&#123;</div><div class="line">$this-&gt;next = $obj;</div><div class="line">return $this;</div><div class="line">&#125;</div><div class="line">abstract public function operator();</div><div class="line">&#125;</div><div class="line">class ResponsibilityA extends Responsibility</div><div class="line">&#123;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">if(false == is_null($this-&gt;next))&#123;</div><div class="line">$this-&gt;next-&gt;operator();</div><div class="line">echo &quot;this is responsibility A&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class ResponsibilityB extends Responsibility</div><div class="line">&#123;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">if(false == is_null($this-&gt;next))&#123;</div><div class="line">$this-&gt;next-&gt;operator();</div><div class="line">echo &quot;this is responsibility B&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$responsibilityA = new ResponsibilityA();</div><div class="line">$responsibilityB = new ResponsibilityB();</div><div class="line">$responsibilityA-&gt;setNext($responsibilityB);</div><div class="line">$responsibilityA-&gt;operator();</div></pre></td></tr></table></figure><h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><blockquote><p>请求以命令的形式包裹在对象中，并传给调用对象。<br>调用对象寻找可以处理该命令的合适的对象，并把该命令传给相应的对象，该对象执行命令。<br>通过调用者调用接受者执行命令，顺序：调用者→接受者→命令。<br><strong>优点：</strong></p><ol><li>降低了系统耦合度。</li><li>新的命令可以很容易添加到系统中去。</li></ol><p><strong>缺点：</strong><br>使用命令模式可能会导致某些系统有过多的具体命令类。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 命令模式  -- commandpattern</div><div class="line"> */</div><div class="line">// 定义接口</div><div class="line">interface Command</div><div class="line">&#123;</div><div class="line">public function execute();</div><div class="line">&#125;</div><div class="line">class RealCommand implements Command</div><div class="line">&#123;</div><div class="line">private $_receiver;</div><div class="line">public function __construct(Receiver $receiver)</div><div class="line">&#123;</div><div class="line">$this-&gt;_receiver = $receiver;</div><div class="line">&#125;</div><div class="line">public function execute()</div><div class="line">&#123;</div><div class="line">$this-&gt;_receiver-&gt;action();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">// 接受者</div><div class="line">class Receiver</div><div class="line">&#123;</div><div class="line">private $_name;</div><div class="line">public function __construct($name)</div><div class="line">&#123;</div><div class="line">$this-&gt;_name = $name;</div><div class="line">&#125;</div><div class="line">public function action()</div><div class="line">&#123;</div><div class="line">echo &quot;this is receiver&quot; . $this-&gt;_name;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">// 请求者</div><div class="line">class Invoker</div><div class="line">&#123;</div><div class="line">private $_realCommand;</div><div class="line">public function __construct(RealCommand $realCommand)</div><div class="line">&#123;</div><div class="line">$this-&gt;_realCommand = $realCommand;</div><div class="line">&#125;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">$this-&gt;_realCommand-&gt;execute();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$receiver = new Receiver(&apos;hello world&apos;);</div><div class="line">$realCommand = new RealCommand($receiver);</div><div class="line">$invoker = new Invoker($realCommand);</div><div class="line">$invoker-&gt;operator();</div></pre></td></tr></table></figure><h3 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h3><blockquote><p>一个表达式接口，该接口解释一个特定的上下文。这种模式被用在 SQL 解析、符号处理引擎等。<br><strong>优点：</strong></p><ol><li>可扩展性比较好，灵活。 </li><li>增加了新的解释表达式的方式。 </li><li>易于实现简单文法。</li></ol><p><strong>缺点：</strong></p><ol><li>可利用场景比较少。 </li><li>对于复杂的文法比较难维护。 </li><li>解释器模式会引起类膨胀。 </li><li>解释器模式采用递归调用方法。</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 解释器模式  -- interpreter pattern</div><div class="line"> */</div><div class="line">interface Expression</div><div class="line">&#123;</div><div class="line">public function interpreter($data);</div><div class="line">&#125;</div><div class="line">class NumberExpression implements Expression</div><div class="line">&#123;</div><div class="line">public function interpreter($num)</div><div class="line">&#123;</div><div class="line">switch($num)&#123;</div><div class="line">case &apos;0&apos;: return &apos;零&apos;;</div><div class="line">case &apos;1&apos;: return &apos;一&apos;;</div><div class="line">case &apos;2&apos;: return &apos;二&apos;;</div><div class="line">case &apos;3&apos;: return &apos;三&apos;;</div><div class="line">case &apos;4&apos;: return &apos;四&apos;;</div><div class="line">case &apos;5&apos;: return &apos;五&apos;;</div><div class="line">case &apos;6&apos;: return &apos;六&apos;;</div><div class="line">case &apos;7&apos;: return &apos;七&apos;;</div><div class="line">case &apos;8&apos;: return &apos;八&apos;;</div><div class="line">case &apos;9&apos;: return &apos;久&apos;;</div><div class="line">default: return &apos;无&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class StringExpression implements Expression</div><div class="line">&#123;</div><div class="line">public function interpreter($str)</div><div class="line">&#123;</div><div class="line">return strtoupper($str);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Interpreter</div><div class="line">&#123;</div><div class="line">public function execute($string)</div><div class="line">&#123;</div><div class="line">$expression = null;</div><div class="line">for($i=0; $i&lt;strlen($string); $i++)&#123;</div><div class="line">if(is_numeric($string[$i]))&#123;</div><div class="line">$expression = new NumberExpression();</div><div class="line">&#125;elseif(is_string($string[$i]))&#123;</div><div class="line">$expression = new StringExpression();</div><div class="line">&#125;</div><div class="line">echo $expression-&gt;interpreter($string[$i]);</div><div class="line">echo &quot;&lt;br/&gt;&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new Interpreter();</div><div class="line">$obj-&gt;execute(&apos;123sqwe09843&apos;);</div></pre></td></tr></table></figure><h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><blockquote><p>顺序访问集合对象的元素，不需要知道集合对象的底层表示。<br><strong>优点：</strong></p><ol><li>它支持以不同的方式遍历一个聚合对象。 </li><li>迭代器简化了聚合类。 </li><li>在同一个聚合上可以有多个遍历。 </li><li>在迭代器模式中，增加新的聚合类和迭代器类都很方便，无须修改原有代码。</li></ol><p><strong>缺点：</strong><br>由于迭代器模式将存储数据和遍历数据的职责分离，增加新的聚合类需要对应增加新的迭代器类，类的个数成对增加，这在一定程度上增加了系统的复杂性。</p><p><strong>注意事项：</strong><br>迭代器模式就是分离了集合对象的遍历行为，抽象出一个迭代器类来负责，这样既可以做到不暴露集合的内部结构，又可让外部代码透明地访问集合内部的数据。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 迭代器模式  --  iterator pattern</div><div class="line"> */</div><div class="line">class Sample implements Iterator</div><div class="line">&#123;</div><div class="line">private $_item;</div><div class="line">public function __construct($data)</div><div class="line">&#123;</div><div class="line">$this-&gt;_item = $data;</div><div class="line">&#125;</div><div class="line">public function current()</div><div class="line">&#123;</div><div class="line">return current($this-&gt;_item);</div><div class="line">&#125;</div><div class="line">public function next()</div><div class="line">&#123;</div><div class="line">return next($this-&gt;_item);</div><div class="line">&#125;</div><div class="line">public function key()</div><div class="line">&#123;</div><div class="line">return key($this-&gt;_item);</div><div class="line">&#125;</div><div class="line">public function rewind()</div><div class="line">&#123;</div><div class="line">reset($this-&gt;_item);</div><div class="line">&#125;</div><div class="line">public function valid()</div><div class="line">&#123;</div><div class="line">return ($this-&gt;current() !== false);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$data = array(&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;, &apos;5&apos;);</div><div class="line">$obj = new Sample($data);</div><div class="line">echo $obj-&gt;current();</div><div class="line">echo $obj-&gt;next();</div><div class="line">echo $obj-&gt;key();</div><div class="line">echo $obj-&gt;rewind();</div><div class="line">echo $obj-&gt;valid();</div></pre></td></tr></table></figure><h3 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h3><blockquote><p>降低多个对象和类之间的通信复杂性。<br>该类通常处理不同类之间的通信，并支持松耦合，使代码易于维护。<br><strong>优点：</strong></p><ol><li>降低了类的复杂度，将一对多转化成了一对一。 </li><li>各个类之间的解耦。 3、符合迪米特原则。</li></ol><p><strong>缺点：</strong><br>中介者会庞大，变得复杂难以维护。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 中介者模式  -- mediator pattern</div><div class="line"> */</div><div class="line">abstract class Mediator</div><div class="line">&#123;</div><div class="line">abstract public function send($message, $colleague);</div><div class="line">&#125;</div><div class="line">abstract class Colleague</div><div class="line">&#123;</div><div class="line">private $_mediator;</div><div class="line">public function __construct($mediator)</div><div class="line">&#123;</div><div class="line">$this-&gt;_mediator = $mediator;</div><div class="line">&#125;</div><div class="line">public function send($message)</div><div class="line">&#123;</div><div class="line">$this-&gt;_mediator-&gt;send($message, $this);</div><div class="line">&#125;</div><div class="line">abstract public function notify($message);</div><div class="line">&#125;</div><div class="line">class Colleague1 extends Colleague</div><div class="line">&#123;</div><div class="line">public function notify($message)</div><div class="line">&#123;</div><div class="line">echo &quot;colleague1 &quot; . $message;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Colleague2 extends Colleague</div><div class="line">&#123;</div><div class="line">public function notify($message)</div><div class="line">&#123;</div><div class="line">echo &quot;colleague2 &quot; . $message;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class NewMediator extends Mediator</div><div class="line">&#123;</div><div class="line">private $_colleauge1;</div><div class="line">private $_colleauge2;</div><div class="line">public function set($col1, $col2)</div><div class="line">&#123;</div><div class="line">$this-&gt;_colleauge1 = $col1;</div><div class="line">$this-&gt;_colleauge2 = $col2;</div><div class="line">&#125;</div><div class="line">public function send($message, $colleague)</div><div class="line">&#123;</div><div class="line">if($this-&gt;_colleauge1 == $colleague)&#123;</div><div class="line">$this-&gt;_colleauge1-&gt;notify($message);</div><div class="line">&#125;else&#123;</div><div class="line">$this-&gt;_colleauge2-&gt;notify($message);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$newMediator = new NewMediator();</div><div class="line">$col1 = new Colleague1($newMediator);</div><div class="line">$col2 = new Colleague2($newMediator);</div><div class="line">$newMediator-&gt;set($col1, $col2);</div><div class="line">$col1-&gt;send(&apos;hello col1&apos;);</div><div class="line">$col2-&gt;send(&apos;hello col2&apos;);</div></pre></td></tr></table></figure><h3 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h3><blockquote><p>保存一个对象的某个状态，以便在适当的时候恢复对象<br>所谓备忘录模式就是在不破坏封装的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样可以在以后将对象恢复到原先保存的状态<br>通过一个备忘录类专门存储对象状态<br>客户不与备忘录类耦合，与备忘录管理类耦合<br><strong>优点：</strong>  </p><ol><li>给用户提供了一种可以恢复状态的机制，可以使用户能够比较方便地回到某个历史的状态。 </li><li>实现了信息的封装，使得用户不需要关心状态的保存细节。  </li></ol><p><strong>缺点：</strong><br>消耗资源。如果类的成员变量过多，势必会占用比较大的资源，而且每一次保存都会消耗一定的内存。  </p><p><strong>注意事项：</strong>  </p><ol><li>为了符合迪米特原则，还要增加一个管理备忘录的类。 </li><li>为了节约内存，可使用原型模式+备忘录模式。</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 备忘录模式  --  memento pattern</div><div class="line"> */</div><div class="line">class Memento</div><div class="line">&#123;</div><div class="line">private $_memento;</div><div class="line">public function __construct(string $state)</div><div class="line">&#123;</div><div class="line">$this-&gt;_memento = $state;</div><div class="line">&#125;</div><div class="line">public function getState()</div><div class="line">&#123;</div><div class="line">return $this-&gt;_memento;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Originator</div><div class="line">&#123;</div><div class="line">private $_state;</div><div class="line">public function setState(string $state)</div><div class="line">&#123;</div><div class="line">$this-&gt;_state = $state;</div><div class="line">&#125;</div><div class="line">public function getState()</div><div class="line">&#123;</div><div class="line">return $this-&gt;_state;</div><div class="line">&#125;</div><div class="line">public function saveMemento()</div><div class="line">&#123;</div><div class="line">return new Memento($this-&gt;_state);</div><div class="line">&#125;</div><div class="line">public function getMemento(Memento $memento)</div><div class="line">&#123;</div><div class="line">$this-&gt;_state = $memento-&gt;getState();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class CakeTask</div><div class="line">&#123;</div><div class="line">private $_mementoList;</div><div class="line">public function __construct()</div><div class="line">&#123;</div><div class="line">$this-&gt;_mementoList = array();</div><div class="line">&#125;</div><div class="line">public function add(Memento $memento)</div><div class="line">&#123;</div><div class="line">$this-&gt;_mementoList[] = $memento;</div><div class="line">&#125;</div><div class="line">public function get(int $index)</div><div class="line">&#123;</div><div class="line">return $this-&gt;_mementoList[$index];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$originator = new Originator();</div><div class="line">$cakeTask = new CakeTask();</div><div class="line">$originator-&gt;setState(&apos;hello one&apos;);</div><div class="line">$originator-&gt;setState(&apos;hello two&apos;);</div><div class="line">$cakeTask-&gt;add($originator-&gt;saveMemento());</div><div class="line">$originator-&gt;setState(&apos;hello three&apos;);</div><div class="line">$cakeTask-&gt;add($originator-&gt;saveMemento());</div><div class="line">$originator-&gt;setState(&apos;hello four&apos;);</div><div class="line"></div><div class="line">echo $originator-&gt;getState();</div><div class="line">$originator-&gt;getMemento($cakeTask-&gt;get(0));</div><div class="line">echo $originator-&gt;getState();</div><div class="line">$originator-&gt;getMemento($cakeTask-&gt;get(1));</div><div class="line">echo $originator-&gt;getState();</div></pre></td></tr></table></figure><h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><blockquote><p>对象间存在一对多关系<br>当一个对象被修改时，则会自动通知它的依赖对象并被自动更新<br><strong>优点：</strong></p><ol><li>观察者和被观察者是抽象耦合的。 </li><li>建立一套触发机制。</li></ol><p><strong>缺点：</strong></p><ol><li>如果一个被观察者对象有很多的直接和间接的观察者的话，将所有的观察者都通知到会花费很多时间。 </li><li>如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。 </li><li>观察者模式没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的，而仅仅只是知道观察目标发生了变化。</li></ol><p><strong>注意事项：</strong></p><ol><li>避免循环引用。 </li><li>如果顺序执行，某一观察者错误会导致系统卡壳，一般采用异步方式。</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 观察者模式  -- observer pattern</div><div class="line"> */</div><div class="line">// 定义接口</div><div class="line">interface Observer</div><div class="line">&#123;</div><div class="line">public function onSendMsg($name);</div><div class="line">public function getName();</div><div class="line">&#125;</div><div class="line">class UserListLogger implements Observer</div><div class="line">&#123;</div><div class="line">public function onSendMsg($name)</div><div class="line">&#123;</div><div class="line">echo $name . &apos; send to UserListLogger&apos;;</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &apos;userlist_logger&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class OtherObserver implements Observer</div><div class="line">&#123;</div><div class="line">public function onSendMsg($name)</div><div class="line">&#123;</div><div class="line">echo $name . &apos; send to OtherObserver&apos;;</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &apos;other_observer&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">interface Observerable</div><div class="line">&#123;</div><div class="line">public function add(Observer $observer);</div><div class="line">public function remove($name);</div><div class="line">&#125;</div><div class="line">class UserList implements Observerable</div><div class="line">&#123;</div><div class="line">private $_observer = array();</div><div class="line">public function add(Observer $observer)</div><div class="line">&#123;</div><div class="line">$this-&gt;_observer[] = $observer;</div><div class="line">&#125;</div><div class="line">public function remove($name)</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_observer as $k=&gt;$val)&#123;</div><div class="line">if($val-&gt;getName() == $name)&#123;</div><div class="line">unset($this-&gt;_observer[$k]);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">public function sendMsg($name)</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_observer as $val)&#123;</div><div class="line">$val-&gt;onSendMsg($name);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$userList = new UserList();</div><div class="line">$userList-&gt;add(new UserListLogger());</div><div class="line">$userList-&gt;add(new OtherObserver());</div><div class="line">$userList-&gt;sendMsg(&apos;jone&apos;);</div><div class="line">$userList-&gt;remove(&apos;userlist_logger&apos;);</div><div class="line">$userList-&gt;sendMsg(&apos;jami&apos;);</div></pre></td></tr></table></figure><h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><blockquote><p>类的行为是基于它的状态改变的<br>对象的行为依赖于它的状态（属性），并且可以根据它的状态改变而改变它的相关行为。<br><strong>优点：</strong></p><ol><li>封装了转换规则。 </li><li>枚举可能的状态，在枚举状态之前需要确定状态种类。 </li><li>将所有与某个状态有关的行为放到一个类中，并且可以方便地增加新的状态，只需要改变对象状态即可改变对象的行为。 </li><li>允许状态转换逻辑与状态对象合成一体，而不是某一个巨大的条件语句块。 </li><li>可以让多个环境对象共享一个状态对象，从而减少系统中对象的个数。</li></ol><p><strong>缺点：</strong></p><ol><li>状态模式的使用必然会增加系统类和对象的个数。 </li><li>状态模式的结构与实现都较为复杂，如果使用不当将导致程序结构和代码的混乱。 </li><li>状态模式对”开闭原则”的支持并不太好，对于可以切换状态的状态模式，增加新的状态类需要修改那些负责状态转换的源代码，否则无法切换到新增状态，而且修改某个状态类的行为也需修改对应类的源代码。</li></ol><p><strong>注意事项：</strong><br>在行为受状态约束的时候使用状态模式，而且状态不超过 5 个。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 状态模式  --  state pattern</div><div class="line"> */</div><div class="line">interface State</div><div class="line">&#123;</div><div class="line">public function handle(Context $context);</div><div class="line">&#125;</div><div class="line">class StateA implements State</div><div class="line">&#123;</div><div class="line">private static $_instance;</div><div class="line">private function __construct()</div><div class="line">&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">public static function getInstance()</div><div class="line">&#123;</div><div class="line">if(is_null(self::$_instance))&#123;</div><div class="line">self::$_instance = new StateA();</div><div class="line">&#125;</div><div class="line">return self::$_instance;</div><div class="line">&#125;</div><div class="line">public function handle(Context $context)</div><div class="line">&#123;</div><div class="line">echo &quot;context A&quot;;</div><div class="line">$context-&gt;setState(StateB::getInstance());</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class StateB implements State</div><div class="line">&#123;</div><div class="line">private static $_instance;</div><div class="line">private function __construct()</div><div class="line">&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">public static function getInstance()</div><div class="line">&#123;</div><div class="line">if(is_null(self::$_instance))&#123;</div><div class="line">self::$_instance = new StateB();</div><div class="line">&#125;</div><div class="line">return self::$_instance;</div><div class="line">&#125;</div><div class="line">public function handle(Context $context)</div><div class="line">&#123;</div><div class="line">echo &quot;context B&quot;;</div><div class="line">$context-&gt;setState(StateA::getInstance());</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Context&#123;</div><div class="line">private $_state;</div><div class="line">public function __construct()</div><div class="line">&#123;</div><div class="line">$this-&gt;_state = StateA::getInstance();</div><div class="line">&#125;</div><div class="line">public function setState(State $state)</div><div class="line">&#123;</div><div class="line">$this-&gt;_state = $state;</div><div class="line">&#125;</div><div class="line">public function request()</div><div class="line">&#123;</div><div class="line">$this-&gt;_state-&gt;handle($this);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$context = new Context();</div><div class="line">$context-&gt;request();</div><div class="line">$context-&gt;request();</div><div class="line">$context-&gt;request();</div><div class="line">$context-&gt;request();</div></pre></td></tr></table></figure><h3 id="空对象模式"><a href="#空对象模式" class="headerlink" title="空对象模式"></a>空对象模式</h3><blockquote><p>一个空对象取代 NULL 对象实例的检查<br>在空对象模式中，我们创建一个指定各种要执行的操作的抽象类和扩展该类的实体类，还创建一个未对该类做任何实现的空对象类，该空对象类将无缝地使用在需要检查空值的地方。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 空对象模式  --  null object pattern</div><div class="line"> */</div><div class="line">abstract class AbstractCustom</div><div class="line">&#123;</div><div class="line">private $_name;</div><div class="line">abstract public function isNil();</div><div class="line">abstract public function getName();</div><div class="line">&#125;</div><div class="line">class RealCustom extends AbstractCustom</div><div class="line">&#123;</div><div class="line">private $_name;</div><div class="line">public function __construct($name)</div><div class="line">&#123;</div><div class="line">$this-&gt;_name = $name;</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return $this-&gt;_name;</div><div class="line">&#125;</div><div class="line">public function isNil()</div><div class="line">&#123;</div><div class="line">return false;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class NullCustom extends AbstractCustom</div><div class="line">&#123;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &quot;this is null custom&quot;;</div><div class="line">&#125;</div><div class="line">public function isNil()</div><div class="line">&#123;</div><div class="line">return false;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class NullFactory</div><div class="line">&#123;</div><div class="line">private $_arr = array(&apos;one&apos;, &apos;two&apos;);</div><div class="line">public function getCustom($name)&#123;</div><div class="line">if(in_array($name, $this-&gt;_arr))&#123;</div><div class="line">return new RealCustom($name);</div><div class="line">&#125;</div><div class="line">return new NullCustom();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new NullFactory();</div><div class="line">$test1 = $obj-&gt;getCustom(&apos;one&apos;);</div><div class="line">$test2 = $obj-&gt;getCustom(&apos;one_one&apos;);</div><div class="line">$test3 = $obj-&gt;getCustom(&apos;two&apos;);</div><div class="line">$test4 = $obj-&gt;getCustom(&apos;two_two&apos;);</div><div class="line">echo $test1-&gt;getName();</div><div class="line">echo $test2-&gt;getName();</div><div class="line">echo $test3-&gt;getName();</div><div class="line">echo $test4-&gt;getName();</div></pre></td></tr></table></figure><h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><blockquote><p>一个类的行为或其算法可以在运行时更改<br>定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换<br><strong>优点：</strong></p><ol><li>算法可以自由切换。 </li><li>避免使用多重条件判断。 </li><li>扩展性良好。</li></ol><p><strong>缺点：</strong></p><ol><li>策略类会增多。 </li><li>所有策略类都需要对外暴露。</li></ol><p><strong>注意事项：</strong><br>如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 策略模式  -- strategy pattern</div><div class="line"> */</div><div class="line">interface Strategy</div><div class="line">&#123;</div><div class="line">public function do_method();</div><div class="line">&#125;</div><div class="line">class StrategyA implements Strategy</div><div class="line">&#123;</div><div class="line">public function do_method()</div><div class="line">&#123;</div><div class="line">echo &quot;this is strategy A&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class StrategyB implements Strategy</div><div class="line">&#123;</div><div class="line">public function do_method()</div><div class="line">&#123;</div><div class="line">echo &quot;this is strategy B&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class StrategyC implements Strategy</div><div class="line">&#123;</div><div class="line">public function do_method()</div><div class="line">&#123;</div><div class="line">echo &quot;this is strategy C&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Question</div><div class="line">&#123;</div><div class="line">private $_strategy;</div><div class="line">public function __construct($strategy)</div><div class="line">&#123;</div><div class="line">$this-&gt;_strategy = $strategy;</div><div class="line">&#125;</div><div class="line">public function handle()</div><div class="line">&#123;</div><div class="line">$this-&gt;_strategy-&gt;do_method();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$a = new Question(new StrategyA());</div><div class="line">$a-&gt;handle();</div><div class="line">$b = new Question(new StrategyB());</div><div class="line">$b-&gt;handle();</div><div class="line">$c = new Question(new StrategyC());</div><div class="line">$c-&gt;handle();</div></pre></td></tr></table></figure><h3 id="模板模式"><a href="#模板模式" class="headerlink" title="模板模式"></a>模板模式</h3><blockquote><p>一些方法通用，却在每一个子类都重新写了这一方法<br>将这些通用算法抽象出来<br>在抽象类实现，其他步骤在子类实现<br><strong>优点：</strong></p><ol><li>封装不变部分，扩展可变部分。 </li><li>提取公共代码，便于维护。 </li><li>行为由父类控制，子类实现。</li></ol><p><strong>缺点：</strong><br>每一个不同的实现都需要一个子类来实现，导致类的个数增加，使得系统更加庞大。</p><p><strong>注意事项：</strong><br>为防止恶意操作，一般模板方法都加上 final 关键词。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 模板模式 -- template pattern</div><div class="line"> */</div><div class="line">abstract class Game</div><div class="line">&#123;</div><div class="line">abstract public function start();</div><div class="line">abstract public function end();</div><div class="line">public function action()</div><div class="line">&#123;</div><div class="line">$this-&gt;start();</div><div class="line">$this-&gt;end();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class SuperMary extends Game</div><div class="line">&#123;</div><div class="line">public function start()</div><div class="line">&#123;</div><div class="line">echo &quot;the game is starting&quot;;</div><div class="line">&#125;</div><div class="line">public function end()</div><div class="line">&#123;</div><div class="line">echo &quot;the game is ending&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$superMary = new SuperMary();</div><div class="line">$superMary-&gt;action();</div></pre></td></tr></table></figure><h3 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h3><blockquote><p>使用了一个访问者类，它改变了元素类的执行算法<br>元素的执行算法可以随着访问者改变而改变<br>稳定的数据结构和易变的操作耦合问题。<br>在数据基础类里面有一个方法接受访问者，将自身引用传入访问者。<br><strong>优点：</strong></p><ol><li>符合单一职责原则。 </li><li>优秀的扩展性。 </li><li>灵活性。</li></ol><p><strong>缺点：</strong></p><ol><li>具体元素对访问者公布细节，违反了迪米特原则。 </li><li>具体元素变更比较困难。 </li><li>违反了依赖倒置原则，依赖了具体类，没有依赖抽象。</li></ol><p><strong>注意事项：</strong><br>访问者可以对功能进行统一，可以做报表、UI、拦截器与过滤器。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> *</div><div class="line"> */</div><div class="line">interface ComputerPart</div><div class="line">&#123;</div><div class="line">public function accept(Visitor $visitor);</div><div class="line">&#125;</div><div class="line">class Computer implements ComputerPart</div><div class="line">&#123;</div><div class="line">private $_computerPart = array();</div><div class="line">public function accept(Visitor $visitor)</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_computerPart as $val)&#123;</div><div class="line">$val-&gt;accept($visitor);</div><div class="line">&#125;</div><div class="line">$visitor-&gt;visit($this);</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &apos;computer&apos;;</div><div class="line">&#125;</div><div class="line">public function setAttach(ComputerPart $computerPart)</div><div class="line">&#123;</div><div class="line">array_push($this-&gt;_computerPart, $computerPart);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Mouse implements ComputerPart</div><div class="line">&#123;</div><div class="line">public function accept(Visitor $visitor)</div><div class="line">&#123;</div><div class="line">$visitor-&gt;visit($this);</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &apos;mouse&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class KeyBoard implements ComputerPart</div><div class="line">&#123;</div><div class="line">public function accept(Visitor $visitor)</div><div class="line">&#123;</div><div class="line">$visitor-&gt;visit($this);</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return &apos;keyboard&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Visitor</div><div class="line">&#123;</div><div class="line">public function visit(ComputerPart $computerPart)</div><div class="line">&#123;</div><div class="line">echo &quot;this is &quot;.$computerPart-&gt;getName();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$computer = new Computer();</div><div class="line">$computer-&gt;setAttach(new Mouse());</div><div class="line">$computer-&gt;setAttach(new KeyBoard());</div><div class="line">$computer-&gt;accept(new Visitor());</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;责任链模式&quot;&gt;&lt;a href=&quot;#责任链模式&quot; class=&quot;headerlink&quot; title=&quot;责任链模式&quot;&gt;&lt;/a&gt;责任链模式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;为请求创建了一个接收者对象的链&lt;br&gt;这种模式给予请求的类型，对请求的发送者和接收者进行解
      
    
    </summary>
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>PHP设计模式之结构型模式（structural patterns）</title>
    <link href="https://zhipenwang.github.io/2018/06/17/structrual_patterns/"/>
    <id>https://zhipenwang.github.io/2018/06/17/structrual_patterns/</id>
    <published>2018-06-17T04:49:51.883Z</published>
    <updated>2018-06-17T04:54:46.527Z</updated>
    
    <content type="html"><![CDATA[<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><blockquote><p>涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。<br>适配器继承或依赖已有的对象，实现想要的目标接口。<br><strong>优点：</strong>  </p><ol><li>可以让任何两个没有关联的类一起运行。  </li><li>提高了类的复用。  </li><li>增加了类的透明度。  </li><li>灵活性好。  </li></ol><p><strong>缺点：</strong></p><ol><li>过多使用适配器会让系统凌乱，不易整体把握，没有必要，不建议使用适配器模式  </li></ol><p><strong>注意事项：</strong><br>适配器不是在详细设计时使用的，而是在解决正在服役的项目使用的</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * adapter pattern  适配器模式</div><div class="line"> */</div><div class="line">// 对象适配器</div><div class="line">// 定义接口</div><div class="line">interface target</div><div class="line">&#123;</div><div class="line">public function echoSample1();</div><div class="line">public function echoSample2();</div><div class="line">&#125;</div><div class="line">class adapterOne implements target</div><div class="line">&#123;</div><div class="line">public function echoSample1()</div><div class="line">&#123;</div><div class="line">echo &quot;+++++&quot;;</div><div class="line">&#125;</div><div class="line">public function echoSample2()</div><div class="line">&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class adapterTwo implements target</div><div class="line">&#123;</div><div class="line">private $adapterOne;</div><div class="line">public function __construct(adapterOne $obj)</div><div class="line">&#123;</div><div class="line">$this-&gt;adapterOne = $obj;</div><div class="line">&#125;</div><div class="line">public function echoSample1()</div><div class="line">&#123;</div><div class="line">$this-&gt;adapterOne-&gt;echoSample1();</div><div class="line">&#125;</div><div class="line">public function echoSample2()</div><div class="line">&#123;</div><div class="line">echo &apos;----&apos;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$adapterTwo = new adapterTwo(new adapterOne);</div><div class="line">$adapterTwo-&gt;echoSample1();</div><div class="line">$adapterTwo-&gt;echoSample2();</div><div class="line"></div><div class="line">// 类适配器</div><div class="line">interface target2</div><div class="line">&#123;</div><div class="line">public function echoSample1();</div><div class="line">public function echoSample2();</div><div class="line">&#125;</div><div class="line">class adapterClassOne</div><div class="line">&#123;</div><div class="line">public function echoSample1()</div><div class="line">&#123;</div><div class="line">echo &quot;****&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class adapterClassTwo extends adapterClassOne implements target2</div><div class="line">&#123;</div><div class="line">public function echoSample2()</div><div class="line">&#123;</div><div class="line">echo &quot;&amp;&amp;&amp;&amp;&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$adapterClassTwo = new adapterClassTwo();</div><div class="line">$adapterClassTwo-&gt;echoSample1();</div><div class="line">$adapterClassTwo-&gt;echoSample2();</div></pre></td></tr></table></figure><h3 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h3><blockquote><p>把抽象化与实现化解耦，使得二者可以独立变化<br>抽象类依赖实现类。<br><strong>优点：</strong>  </p><ol><li>抽象和实现的分离。 </li><li>优秀的扩展能力。 </li><li>实现细节对客户透明。</li></ol><p><strong>缺点：</strong><br>桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。<br><strong>注意事项：</strong><br>对于两个独立变化的维度，使用桥接模式再适合不过了。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 桥接模式 -- bridge pattern</div><div class="line"> */</div><div class="line">// 定义接口--对象</div><div class="line">interface DrawApi</div><div class="line">&#123;</div><div class="line">public function draw();</div><div class="line">&#125;</div><div class="line">class RedColor implements DrawApi</div><div class="line">&#123;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">echo &quot;red color&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class GreenColor implements DrawApi</div><div class="line">&#123;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">echo &quot;green color&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">// 定义抽象类</div><div class="line">abstract class Shape</div><div class="line">&#123;</div><div class="line">abstract public function draw();</div><div class="line">&#125;</div><div class="line">class Circle extends Shape</div><div class="line">&#123;</div><div class="line">private $drawApi;</div><div class="line">public function __construct(DrawApi $obj)</div><div class="line">&#123;</div><div class="line">$this-&gt;drawApi = $obj;</div><div class="line">&#125;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">$this-&gt;drawApi-&gt;draw();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$obj = new Circle(new RedColor());</div><div class="line">$obj-&gt;draw();</div><div class="line">$obj2 = new Circle(new GreenColor());</div><div class="line">$obj2-&gt;draw();</div></pre></td></tr></table></figure><h3 id="过滤器模式"><a href="#过滤器模式" class="headerlink" title="过滤器模式"></a>过滤器模式</h3><blockquote><p>使用不同的标准来过滤一组对象，通过逻辑运算以解耦的方式把它们连接起来</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 过滤器模式 -- filter pattern</div><div class="line"> */</div><div class="line">// 定义接口</div><div class="line">interface Shape</div><div class="line">&#123;</div><div class="line">public function arrayPrint(array $arr);</div><div class="line">&#125;</div><div class="line">class One implements Shape</div><div class="line">&#123;</div><div class="line">public function arrayPrint(array $arr)</div><div class="line">&#123;</div><div class="line">$array = array();</div><div class="line">foreach($arr as $v)&#123;</div><div class="line">if($v-&gt;getName() == &apos;one&apos;)&#123;</div><div class="line">$array[] = $v;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">return $array;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Two implements Shape</div><div class="line">&#123;</div><div class="line">public function arrayPrint(array $arr)</div><div class="line">&#123;</div><div class="line">$array = array();</div><div class="line">foreach($arr as $v)&#123;</div><div class="line">if($v-&gt;getName() == &apos;two&apos;)&#123;</div><div class="line">$array[] = $v;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">return $array;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Three implements Shape</div><div class="line">&#123;</div><div class="line">public function arrayPrint(array $arr)</div><div class="line">&#123;</div><div class="line">$array = array();</div><div class="line">foreach($arr as $v)&#123;</div><div class="line">if($v-&gt;getID() == &apos;2&apos;)&#123;</div><div class="line">$array[] = $v;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">return $array;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 定义标准类</div><div class="line">class Data</div><div class="line">&#123;</div><div class="line">private $id;</div><div class="line">private $name;</div><div class="line">public function __construct($id, $name)</div><div class="line">&#123;</div><div class="line">$this-&gt;id = $id;</div><div class="line">$this-&gt;name = $name;</div><div class="line">&#125;</div><div class="line">public function getID()</div><div class="line">&#123;</div><div class="line">return $this-&gt;id;</div><div class="line">&#125;</div><div class="line">public function getName()</div><div class="line">&#123;</div><div class="line">return $this-&gt;name;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$array = array();</div><div class="line">$array[] = new Data(&apos;1&apos;, &apos;one&apos;);</div><div class="line">$array[] = new Data(&apos;2&apos;, &apos;one&apos;);</div><div class="line">$array[] = new Data(&apos;3&apos;, &apos;two&apos;);</div><div class="line">$array[] = new Data(&apos;4&apos;, &apos;three&apos;);</div><div class="line"></div><div class="line">$one = new One();</div><div class="line">arrayPrint($one-&gt;arrayPrint($array));</div><div class="line">$two = new Two();</div><div class="line">arrayPrint($two-&gt;arrayPrint($array));</div><div class="line"></div><div class="line">$three = new Three();</div><div class="line">arrayPrint($three-&gt;arrayPrint($one-&gt;arrayPrint($array)));</div><div class="line"></div><div class="line">function arrayPrint($arr)</div><div class="line">&#123;</div><div class="line">foreach($arr as $v)&#123;</div><div class="line">echo $v-&gt;getID();</div><div class="line">echo $v-&gt;getName();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><blockquote><p>一组相似的对象当作一个单一的对象<br>组合模式依据树形结构来组合对象，用来表示部分以及整体层次<br><strong>意图：</strong><br>将对象组合成树形结构以表示”部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。<br><strong>优点：</strong></p><ol><li>高层模块调用简单。</li><li>节点自由增加。</li></ol><p><strong>缺点：</strong><br>在使用组合模式时，其叶子和树枝的声明都是实现类，而不是接口，违反了依赖倒置原则。<br><strong>注意事项：</strong><br>定义时为具体类。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 组合模式  -- composite pattern</div><div class="line"> */</div><div class="line">interface Shape</div><div class="line">&#123;</div><div class="line">public function add($obj);</div><div class="line">public function remove($obj);</div><div class="line">public function operator();</div><div class="line">&#125;</div><div class="line">class Composite implements Shape</div><div class="line">&#123;</div><div class="line">private $_composite;</div><div class="line">public function __construct()</div><div class="line">&#123;</div><div class="line">$this-&gt;_composite = array();</div><div class="line">&#125;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_composite as $v)&#123;</div><div class="line">$v-&gt;operator();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">public function add($obj)</div><div class="line">&#123;</div><div class="line">$this-&gt;_composite[] = $obj;</div><div class="line">&#125;</div><div class="line">public function remove($obj)</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_composite as $k=&gt;$v)&#123;</div><div class="line">if($obj == $v)&#123;</div><div class="line">unset($this-&gt;_composite[$k]);</div><div class="line">return true;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">return false;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Leaf implements Shape</div><div class="line">&#123;</div><div class="line">private $_name;</div><div class="line">public function __construct($name)</div><div class="line">&#123;</div><div class="line">$this-&gt;_name = $name;</div><div class="line">&#125;</div><div class="line">public function add($obj)&#123;&#125;</div><div class="line">public function remove($obj)&#123;&#125;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">echo $this-&gt;_name;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$leaf1 = new Leaf(&apos;one&apos;);</div><div class="line">$leaf2 = new Leaf(&apos;two&apos;);</div><div class="line">$composite = new Composite();</div><div class="line">$composite-&gt;add($leaf1);</div><div class="line">$composite-&gt;add($leaf2);</div><div class="line">$composite-&gt;operator();</div><div class="line">$composite-&gt;remove($leaf1);</div><div class="line">$composite-&gt;operator();</div></pre></td></tr></table></figure><h3 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h3><blockquote><p>允许向一个现有的对象添加新的功能，同时又不改变其结构<br><strong>优点：</strong><br>装饰类和被装饰类可以独立发展，不会相互耦合，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能。<br><strong>缺点：</strong><br>多层装饰比较复杂。<br><strong>注意事项：</strong><br>可代替继承。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 装饰器模式  -- decorator pattern</div><div class="line"> */</div><div class="line">// 定义接口</div><div class="line">interface Shape</div><div class="line">&#123;</div><div class="line">public function draw();</div><div class="line">&#125;</div><div class="line">class Decorator implements Shape</div><div class="line">&#123;</div><div class="line">private $_decorator;</div><div class="line">public function __construct(Shape $decorator)</div><div class="line">&#123;</div><div class="line">$this-&gt;_decorator = $decorator;</div><div class="line">&#125;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">$this-&gt;_decorator-&gt;draw();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class RedColor extends Decorator</div><div class="line">&#123;</div><div class="line">public function __construct(Shape $decorator)</div><div class="line">&#123;</div><div class="line">parent::__construct($decorator);</div><div class="line">&#125;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">parent::draw();</div><div class="line">$this-&gt;echoDraw();</div><div class="line">&#125;</div><div class="line">public function echoDraw()</div><div class="line">&#123;</div><div class="line">echo &quot;red color&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class GreenColor extends Decorator</div><div class="line">&#123;</div><div class="line">public function __construct(Shape $decorator)</div><div class="line">&#123;</div><div class="line">parent::__construct($decorator);</div><div class="line">&#125;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">parent::draw();</div><div class="line">$this-&gt;echoDraw();</div><div class="line">&#125;</div><div class="line">public function echoDraw()</div><div class="line">&#123;</div><div class="line">echo &quot;green color&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Color implements Shape</div><div class="line">&#123;</div><div class="line">public function draw()&#123;</div><div class="line">echo &quot;color&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new Color();</div><div class="line">$obj_red = new RedColor($obj);</div><div class="line">$obj_green = new GreenColor($obj_red);</div><div class="line">$obj_red-&gt;draw();</div><div class="line">$obj_green-&gt;draw();</div></pre></td></tr></table></figure><h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h3><blockquote><p>隐藏系统的复杂性，并向客户端提供了一个客户端可以访问系统的接口<br>在客户端和复杂系统之间再加一层，这一层将调用顺序、依赖关系等处理好。<br><strong>优点：</strong></p><ol><li>减少系统相互依赖。 </li><li>提高灵活性。 </li><li>提高了安全性。</li></ol><p><strong>缺点：</strong><br>不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。<br><strong>注意事项：</strong><br>在层次化结构中，可以使用外观模式定义系统中每一层的入口。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 门面模式/外观模式  -- facade pattern</div><div class="line"> */</div><div class="line">//定义接口</div><div class="line">interface Shape</div><div class="line">&#123;</div><div class="line">public function draw();</div><div class="line">&#125;</div><div class="line">class Red implements Shape</div><div class="line">&#123;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">echo &quot;red&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Green implements Shape</div><div class="line">&#123;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">echo &quot;green&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Demo</div><div class="line">&#123;</div><div class="line">private $_red;</div><div class="line">private $_green;</div><div class="line">public function __construct()</div><div class="line">&#123;</div><div class="line">$this-&gt;_red = new Red();</div><div class="line">$this-&gt;_green = new Green();</div><div class="line">&#125;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">$this-&gt;_red-&gt;draw();</div><div class="line">$this-&gt;_green-&gt;draw();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new Demo();</div><div class="line">$obj-&gt;draw();</div></pre></td></tr></table></figure><h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><blockquote><p>减少创建对象的数量，以减少内存占用和提高性能<br>用 HashMap 存储这些对象。<br><strong>优点：</strong><br>大大减少对象的创建，降低系统的内存，使效率提高。<br><strong>缺点：</strong><br>提高了系统的复杂度，需要分离出外部状态和内部状态，而且外部状态具有固有化的性质，不应该随着内部状态的变化而变化，否则会造成系统的混乱。<br><strong>注意事项：</strong>  </p><ol><li>注意划分外部状态和内部状态，否则可能会引起线程安全问题。 </li><li>这些类必须有一个工厂对象加以控制</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 享元模式  -- flyweight pattern</div><div class="line"> */</div><div class="line">abstract class Resource</div><div class="line">&#123;</div><div class="line">private $_resource = null;</div><div class="line">abstract public function operator();</div><div class="line">&#125;</div><div class="line">class UnShare extends Resource</div><div class="line">&#123;</div><div class="line">public function __construct($str)</div><div class="line">&#123;</div><div class="line">$this-&gt;_resource = $str;</div><div class="line">&#125;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">echo $this-&gt;_resource;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class Share extends Resource</div><div class="line">&#123;</div><div class="line">private $_resources = array();</div><div class="line">public function setResource($str)</div><div class="line">&#123;</div><div class="line">if(isset($this-&gt;_resources[$str]))&#123;</div><div class="line">return $this-&gt;_resources[$str];</div><div class="line">&#125;else&#123;</div><div class="line">return $this-&gt;_resources[$str] = $str;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">public function operator()</div><div class="line">&#123;</div><div class="line">foreach($this-&gt;_resources as $key=&gt;$val)&#123;</div><div class="line">echo $key . &apos;=&gt;&apos; . $val;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new Share();</div><div class="line">$obj-&gt;setResource(&apos;a&apos;);</div><div class="line">$obj-&gt;operator();</div><div class="line">$obj-&gt;setResource(&apos;b&apos;);</div><div class="line">$obj-&gt;operator();</div><div class="line">$objUnShare = new UnShare(&apos;A&apos;);</div><div class="line">$objUnShare-&gt;operator();</div><div class="line">$objUnShare = new UnShare(&apos;B&apos;);</div><div class="line">$objUnShare-&gt;operator();</div></pre></td></tr></table></figure><h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><blockquote><p>为其他对象提供一种代理以控制对这个对象的访问。<br>实现与被代理类组合。<br><strong>优点：</strong></p><ol><li>职责清晰。 </li><li>高扩展性。 </li><li>智能化。  </li></ol><p><strong>缺点：</strong> </p><ol><li>由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢。</li><li>实现代理模式需要额外的工作，有些代理模式的实现非常复杂。</li></ol><p><strong>注意事项：</strong> </p><ol><li>和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。 </li><li>和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * 代理模式  -- proxy pattern</div><div class="line"> */</div><div class="line">abstract class Subject</div><div class="line">&#123;</div><div class="line">abstract public function draw();</div><div class="line">&#125;</div><div class="line">class RealSubject extends Subject</div><div class="line">&#123;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">echo &quot;real subject&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">class ProxySubject extends Subject</div><div class="line">&#123;</div><div class="line">private $_subject = null;</div><div class="line">public function draw()</div><div class="line">&#123;</div><div class="line">$this-&gt;before();</div><div class="line">if(is_null($this-&gt;_subject))&#123;</div><div class="line">$this-&gt;_subject = new RealSubject();</div><div class="line">&#125;</div><div class="line">$this-&gt;_subject-&gt;draw();</div><div class="line">$this-&gt;after();</div><div class="line">&#125;</div><div class="line">public function before()</div><div class="line">&#123;</div><div class="line">echo &quot;before&quot;;</div><div class="line">&#125;</div><div class="line">public function after()</div><div class="line">&#123;</div><div class="line">echo &quot;after&quot;;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">$obj = new ProxySubject();</div><div class="line">$obj-&gt;draw();</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;适配器模式&quot;&gt;&lt;a href=&quot;#适配器模式&quot; class=&quot;headerlink&quot; title=&quot;适配器模式&quot;&gt;&lt;/a&gt;适配器模式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。&lt;br&gt;适配器继承或依赖已有的对
      
    
    </summary>
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>PHP设计模式之创建型模式（creational patterns）</title>
    <link href="https://zhipenwang.github.io/2018/06/16/creational_patterns/"/>
    <id>https://zhipenwang.github.io/2018/06/16/creational_patterns/</id>
    <published>2018-06-16T10:56:03.373Z</published>
    <updated>2018-06-16T11:00:44.814Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><blockquote><p>定义一个创建对象的接口，让其子类决定去实例化哪一个工厂类<br>创建的过程是在子类中执行<br><strong>优点</strong>：  </p><ol><li>调用者想创建一个对象只需要知道名称即可  </li><li>扩展性高，想增加一个产品，只需要扩展一个工厂类就可以  </li><li>屏蔽产品具体实现，调用者只关心产品的接口  </li></ol><p><strong>缺点</strong>：  </p><ol><li>每增加一个产品，都需要增加一个具体类和对象实现工厂，使得系统类的个数成倍增加，一定程度上增加了系统复杂度，同时也增加了系统具体类的依赖</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">/*** ------------工厂模式  factory-----------------------  ***/</div><div class="line"></div><div class="line">class DB</div><div class="line">&#123;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        echo get_class();</div><div class="line">    &#125;</div><div class="line">    public function die()</div><div class="line">    &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class Mysql extends DB&#123;&#125;</div><div class="line">class SqlSrv extends DB&#123;&#125;</div><div class="line">class Odbc extends DB&#123;&#125;</div><div class="line"></div><div class="line"></div><div class="line">interface TestFactory</div><div class="line">&#123;</div><div class="line">    public function toString();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Factory implements TestFactory</div><div class="line">&#123;</div><div class="line">    public function toString()&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    public function do($type)</div><div class="line">    &#123;</div><div class="line">        switch($type)&#123;</div><div class="line">            case &apos;Mysql&apos;:</div><div class="line">                return new Mysql();</div><div class="line">            case &apos;SqlSrv&apos;:</div><div class="line">                return new SqlSrv();</div><div class="line">            case &apos;Odbc&apos;:</div><div class="line">                return new Odbc();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$test = new Factory();</div><div class="line">$test-&gt;do(&apos;Mysql&apos;);</div><div class="line">$test-&gt;do(&apos;SqlSrv&apos;);</div><div class="line">$test-&gt;do(&apos;Odbc&apos;);</div></pre></td></tr></table></figure><h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><blockquote><p>围绕一个超级工厂创建其他工厂，该超级工厂是其他工厂的工厂<br>一个工厂中聚合多个同类产品<br><strong>优点</strong>：<br>    当一个产品族中的多个对象被设计成一起工作时，它能保证客户端始终只使用同一个产品族中的对象。<br><strong>缺点</strong>：<br>    产品族扩展非常困难，要增加一个系列的某一产品，既要在抽象的 Creator 里加代码，又要在具体的里面加代码。<br><strong>注意事项</strong>：<br>    产品族难扩展，产品等级易扩展。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">/*** ------------抽象工厂模式  abstract factory-----------------------  ***/</div><div class="line">class Cache&#123;&#125;</div><div class="line">class CacheDie&#123;&#125;</div><div class="line">class FileCache extends Cache</div><div class="line">&#123;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        echo &quot;filecache&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class RedisCache extends Cache&#123;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        echo &quot;rediscache&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class FileCacheDie extends CacheDie</div><div class="line">&#123;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        echo &quot;FileCacheDie&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class RedisCacheDie extends CacheDie</div><div class="line">&#123;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        echo &quot;RedisCacheDie&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class CacheAbstractFactory</div><div class="line">&#123;</div><div class="line">    public function createCache($type)&#123;</div><div class="line">        switch ($type) &#123;</div><div class="line">            case &apos;file&apos;:</div><div class="line">                return new FileCache();</div><div class="line">            case &apos;redis&apos;:</div><div class="line">                return new RedisCache();</div><div class="line">            default:</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class CacheDieAbstractFactory</div><div class="line">&#123;</div><div class="line">    public function createCache($type)&#123;</div><div class="line">        switch ($type) &#123;</div><div class="line">            case &apos;file&apos;:</div><div class="line">                return new FileCacheDie();</div><div class="line">            case &apos;redis&apos;:</div><div class="line">                return new RedisCacheDie();</div><div class="line">            default:</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class TestAbstractFactory</div><div class="line">&#123;</div><div class="line">    public function createType($type)</div><div class="line">    &#123;</div><div class="line">        switch ($type) &#123;</div><div class="line">            case &apos;cache&apos;:</div><div class="line">                return new CacheAbstractFactory();</div><div class="line">            case &apos;cacheDie&apos;:</div><div class="line">                return new CacheDieAbstractFactory();</div><div class="line">            default:</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$testAbstractFactory = new TestAbstractFactory();</div><div class="line">$cache = $testAbstractFactory-&gt;createType(&apos;cache&apos;);</div><div class="line">$cache-&gt;createCache(&apos;file&apos;);</div><div class="line">$cache-&gt;createCache(&apos;redis&apos;);</div><div class="line">$cacheDie = $testAbstractFactory-&gt;createType(&apos;cacheDie&apos;);</div><div class="line">$cacheDie-&gt;createCache(&apos;file&apos;);</div><div class="line">$cacheDie-&gt;createCache(&apos;redis&apos;);</div><div class="line"></div><div class="line">/*** -----------------------------------  ***/</div></pre></td></tr></table></figure><h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><blockquote><p>负责创建自己的对象，同时确保只有单个对象被创建。<br>这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。<br><strong>注意</strong>：  </p><ol><li>单例类只能有一个实例。  </li><li>单例类必须自己创建自己的唯一实例。  </li><li>单例类必须给所有其他对象提供这一实例。  </li></ol><p><strong>优点</strong>：  </p><ol><li>在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例  </li><li>避免对资源的多重占用（比如写文件操作）。  </li></ol><p><strong>缺点</strong>：<br>    没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。<br><strong>注意事项</strong>：<br>    getInstance() 方法中需要使用同步锁 synchronized (Singleton.class) 防止多线程同时进入造成 instance 被多次实例化。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">/*** -----------单例模式  singleton------------  ***/</div><div class="line">final class TestSingle</div><div class="line">&#123;</div><div class="line"></div><div class="line">    private static $instance;</div><div class="line">    public static function getInstance()</div><div class="line">    &#123;</div><div class="line">        if(!(self::$instance instanceof self ))&#123;</div><div class="line">            self::$instance = new self();</div><div class="line">        &#125;</div><div class="line">        return self::$instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private function __construct()</div><div class="line">    &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function toString()</div><div class="line">    &#123;</div><div class="line">        echo &quot;string&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">$test = TestSingle::getInstance();</div><div class="line">$test-&gt;toString();</div><div class="line"></div><div class="line">/*** -----------------------------------  ***/</div></pre></td></tr></table></figure><h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h3><blockquote><p>一个 Builder 类会一步一步构造最终的对象。该 Builder 类是独立于其他对象的。<br><strong>优点</strong>：  </p><ol><li>建造者独立，易扩展。  </li><li>便于控制细节风险。  </li></ol><p><strong>缺点</strong>：  </p><ol><li>产品必须有共同点，范围有限制。  </li><li>如内部变化复杂，会有很多的建造类。  </li></ol><p><strong>注意事项</strong>：<br>    与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">/*** --------------建造者模式  builder---------------------  ***/</div><div class="line"></div><div class="line">class Product</div><div class="line">&#123;</div><div class="line">    private $_arr;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        $this-&gt;_arr = array();</div><div class="line">    &#125;</div><div class="line">    public function add($part)</div><div class="line">    &#123;</div><div class="line">        return array_push($this-&gt;_arr, $part);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Builder</div><div class="line">&#123;</div><div class="line">    private $_product;</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        $this-&gt;_product = new Product();</div><div class="line">    &#125;</div><div class="line">    public function add1($part)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;_product-&gt;add($part);</div><div class="line">    &#125;</div><div class="line">    public function add2($part)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;_product-&gt;add($part);</div><div class="line">    &#125;</div><div class="line">    public function getPart()</div><div class="line">    &#123;</div><div class="line">        return $this-&gt;_product;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Director</div><div class="line">&#123;</div><div class="line">    public function __construct(Builder $builder)</div><div class="line">    &#123;</div><div class="line">        $builder-&gt;add1(&apos;arr1&apos;);</div><div class="line">        $builder-&gt;add2(&apos;add2&apos;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$test_builder = new Builder();</div><div class="line">$test_director = new Director($test_builder);</div><div class="line">print_r($test_builder-&gt;getPart());</div><div class="line"></div><div class="line">/*** -----------------------------------  ***/</div></pre></td></tr></table></figure><h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><blockquote><p>实现了一个原型接口，该接口用于创建当前对象的克隆。<br>实现克隆 clone<br><strong>优点</strong>：  </p><ol><li>性能提高。  </li><li>逃避构造函数的约束。  </li></ol><p><strong>缺点</strong>：  </p><ol><li>配备克隆方法需要对类的功能进行通盘考虑，这对于全新的类不是很难，但对于已有的类不一定很容易，特别当一个类引用不支持串行化的间接对象，或者引用含有循环结构的时候。  </li><li>必须实现 Cloneable 接口。  </li></ol><p><strong>注意事项</strong>：<br>    与通过对一个类进行实例化来构造新对象不同的是，原型模式是通过拷贝一个现有对象生成新对象的。浅拷贝实现 Cloneable，重写，深拷贝是通过实现 Serializable 读取二进制流。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">/*** --------------原型模式  prototype---------------------  ***/</div><div class="line"></div><div class="line">class ProtoType</div><div class="line">&#123;</div><div class="line">    private $_name;</div><div class="line">    public function __construct($obj)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;_name = $obj;</div><div class="line">    &#125;</div><div class="line">    public function copy()</div><div class="line">    &#123;</div><div class="line">        return clone $this;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class TestProto&#123;&#125;</div><div class="line">$testProto = new ProtoType(new TestProto());</div><div class="line">print_r($testProto);</div><div class="line">$testProtoCopy = $testProto-&gt;copy();</div><div class="line">print_r($testProtoCopy);</div><div class="line"></div><div class="line">/*** -----------------------------------  ***/</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;工厂模式&quot;&gt;&lt;a href=&quot;#工厂模式&quot; class=&quot;headerlink&quot; title=&quot;工厂模式&quot;&gt;&lt;/a&gt;工厂模式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;定义一个创建对象的接口，让其子类决定去实例化哪一个工厂类&lt;br&gt;创建的过程是在子类中执行&lt;br&gt;&lt;
      
    
    </summary>
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>PHP设计模式（design patterns of PHP）</title>
    <link href="https://zhipenwang.github.io/2018/06/16/design_patterns/"/>
    <id>https://zhipenwang.github.io/2018/06/16/design_patterns/</id>
    <published>2018-06-16T10:54:26.857Z</published>
    <updated>2018-07-01T02:41:09.997Z</updated>
    
    <content type="html"><![CDATA[<h3 id="23种设计模式"><a href="#23种设计模式" class="headerlink" title="23种设计模式"></a>23种设计模式</h3><blockquote><p>以下包含java设计模式的思想（共25种设计模式）<br>三大类：创建型模式（creational patterns）、结构型模式（structural patterns）、行为型模式（behavioral patterns）  </p></blockquote><h3 id="创建型模式（creational-patterns）-："><a href="#创建型模式（creational-patterns）-：" class="headerlink" title="创建型模式（creational patterns）:："></a><strong>创建型模式（creational patterns）:</strong>：</h3><blockquote><ol><li>工厂模式 – factory pattern  </li><li>抽象工厂模式 – abstract factory pattern  </li><li>单例模式 – singleton pattern  </li><li>建造者模式 – builder pattern  </li><li>原型模式 – prototype pattern  </li></ol></blockquote><h3 id="结构型模式（structural-patterns）"><a href="#结构型模式（structural-patterns）" class="headerlink" title="结构型模式（structural patterns）:"></a><strong>结构型模式（structural patterns）:</strong></h3><blockquote><ol><li>适配器模式  –  adapter pattern</li><li>桥接模式    –  bridge pattern</li><li>过滤器模式/标准模式  –  filter pattern / criteria pattern</li><li>组合模式    –  composite pattern</li><li>装饰器模式  –  decorator pattern</li><li>外观模/门面模式  –  facade pattern</li><li>享元模式    –  flyweight pattern</li><li>代理模式    –  proxy pattern</li></ol></blockquote><h3 id="行为型模式（behavioral-patterns）："><a href="#行为型模式（behavioral-patterns）：" class="headerlink" title="行为型模式（behavioral patterns）："></a><strong>行为型模式（behavioral patterns）：</strong></h3><blockquote><ol><li>责任链模式  –  responsibility pattern</li><li>命令模式    –  command pattern</li><li>解释器模式  –  expression pattern</li><li>迭代器模式  –  iterator pattern</li><li>中介者模式  – mediator pattern</li><li>备忘录模式  –  memento pattern</li><li>观察者模式  –  observer pattern</li><li>状态模式    –  state pattern</li><li>空对象模式  –  null object pattern</li><li>策略模式   –  strategy pattern</li><li>模板模式   –  template pattern</li><li>访问者模式 –  visitor pattern</li></ol></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;23种设计模式&quot;&gt;&lt;a href=&quot;#23种设计模式&quot; class=&quot;headerlink&quot; title=&quot;23种设计模式&quot;&gt;&lt;/a&gt;23种设计模式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;以下包含java设计模式的思想（共25种设计模式）&lt;br&gt;三大类：创建型模
      
    
    </summary>
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="https://zhipenwang.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>linux下关于服务端口的配置</title>
    <link href="https://zhipenwang.github.io/2018/06/10/server_port/"/>
    <id>https://zhipenwang.github.io/2018/06/10/server_port/</id>
    <published>2018-06-10T09:29:26.470Z</published>
    <updated>2018-06-10T09:33:36.754Z</updated>
    
    <content type="html"><![CDATA[<h3 id="端口服务"><a href="#端口服务" class="headerlink" title="端口服务"></a>端口服务</h3><blockquote><p>查看端口使用情况</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">netstat命令各个参数说明如下:</div><div class="line">    -t : 指明显示TCP端口</div><div class="line">    -u : 指明显示UDP端口</div><div class="line">    -l : 仅显示监听套接字(所谓套接字就是使应用程序能够读写与收发通讯协议(protocol)与资料的程序)</div><div class="line">    -p : 显示进程标识符和程序名称，每一个套接字/端口都属于一个程序。</div><div class="line">    -n : 不进行DNS轮询，显示IP(可以加速操作)</div><div class="line">netstat -ntlp   //查看当前所有tcp端口·</div><div class="line">netstat -ntulp |grep 80   //查看所有80端口使用情况·</div><div class="line">netstat -an | grep 3306   //查看所有3306端口使用情况·</div></pre></td></tr></table></figure><h3 id="端口映射配置"><a href="#端口映射配置" class="headerlink" title="端口映射配置"></a>端口映射配置</h3><blockquote><p>需求：<br>PC_A是 eth0: 172.18.10.212  内网；eth1: 219.239.xx.xx  外网</p><p>PC_B是 172.18.10.205  内网</p><p>A的8080端口映射到B的80端口</p></blockquote><h4 id="1-首先应该做的是"><a href="#1-首先应该做的是" class="headerlink" title="1. 首先应该做的是"></a>1. 首先应该做的是</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/etc/sysctl.conf配置文件:</div><div class="line">    net.ipv4.ip_forward = 1 默认是0.</div><div class="line">这样允许iptalbes FORWARD。</div></pre></td></tr></table></figure><h4 id="2-在-etc-rc-d-init-d目录下有iptables-文件，使用格式如下"><a href="#2-在-etc-rc-d-init-d目录下有iptables-文件，使用格式如下" class="headerlink" title="2. 在/etc/rc.d/init.d目录下有iptables 文件，使用格式如下"></a>2. 在/etc/rc.d/init.d目录下有iptables 文件，使用格式如下</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Usage: ./iptables &#123;start|stop|restart|condrestart|status|panic|save&#125;</div><div class="line">    相当与service iptables &#123;....&#125;</div><div class="line">    把iptables 服务停止，清除以前的规则，存盘</div><div class="line">    </div><div class="line">到/etc/rc.d/init.d目录下，运行</div><div class="line">    ./iptables stop</div><div class="line">    iptalbes -F</div><div class="line">    iptalbes -X</div><div class="line">    iptalbes -Z</div><div class="line">    ./iptables save</div></pre></td></tr></table></figure><h4 id="3-重新配置规则"><a href="#3-重新配置规则" class="headerlink" title="3. 重新配置规则"></a>3. 重新配置规则</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">iptables -t nat -A PREROUTING -d 219.239.xx.xx -p tcp --dport 8080 -j DNAT --to-destination 172.18.10.205:80</div><div class="line"></div><div class="line">iptables -t nat -A POSTROUTING -d 172.18.10.205 -p tcp --dport 80 -j SNAT --to 172.18.10.212</div><div class="line"></div><div class="line">iptables -A FORWARD -o eth0 -d 172.18.10.205 -p tcp --dport 80 -j ACCEPT</div><div class="line"></div><div class="line">iptables -A FORWARD -i eth0 -s 172.18.10.205 -p tcp --sport 80 -j ACCEPT</div><div class="line"></div><div class="line">DNAT SNAT 的请参考帮助，这里不再陈述。</div></pre></td></tr></table></figure><h4 id="4-新的规则存盘"><a href="#4-新的规则存盘" class="headerlink" title="4. 新的规则存盘"></a>4. 新的规则存盘</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> ./iptables save</div><div class="line"></div><div class="line">规则存盘后在/etc/sysconfig/iptables这个文件里面，若你对这个文件很熟悉</div><div class="line">直接修改这里的内容也等于命令行方式输入规则。</div></pre></td></tr></table></figure><h4 id="5-启动iptables-服务"><a href="#5-启动iptables-服务" class="headerlink" title="5. 启动iptables 服务"></a>5. 启动iptables 服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">./iptables start</div><div class="line">在/proc/net/ip_conntrack文件里有包的流向，如下面</div><div class="line"></div><div class="line">   tcp 6 53 TIME_WAIT src=221.122.59.2 dst=219.239.xx.xx sport=7958 dport=8080 packets=9 bytes=1753</div><div class="line">   </div><div class="line">   src=172.18.10.205 dst=172.18.10.212 sport=80 dport=7958 packets=9 bytes=5777 [ASSURED] use=1</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;端口服务&quot;&gt;&lt;a href=&quot;#端口服务&quot; class=&quot;headerlink&quot; title=&quot;端口服务&quot;&gt;&lt;/a&gt;端口服务&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;查看端口使用情况&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlig
      
    
    </summary>
    
      <category term="服务器" scheme="https://zhipenwang.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="运维" scheme="https://zhipenwang.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>jQuery的三种bind/One/Live/On事件绑定使用方法</title>
    <link href="https://zhipenwang.github.io/2018/05/20/js_5/"/>
    <id>https://zhipenwang.github.io/2018/05/20/js_5/</id>
    <published>2018-05-20T12:36:52.303Z</published>
    <updated>2018-05-20T12:50:44.710Z</updated>
    
    <content type="html"><![CDATA[<h3 id="on-events-selector-data-fn"><a href="#on-events-selector-data-fn" class="headerlink" title="on(events,[selector],[data],fn)"></a>on(events,[selector],[data],fn)</h3><blockquote><p>events:一个或多个用空格分隔的事件类型和可选的命名空间，如”click”或”keydown.myPlugin” 。<br>selector:一个选择器字符串用于过滤器的触发事件的选择器元素的后代。如果选择器为null或省略，当它到达选定的元素，事件总是触发。<br>data:当一个事件被触发时要传递event.data给事件处理函数。<br>fn:该事件被触发时执行的函数。 false 值也可以做一个函数的简写，返回false</p></blockquote><h4 id="替换bind"><a href="#替换bind" class="headerlink" title="替换bind()"></a>替换bind()</h4><blockquote><p>当第二个参数’selector’为null时，on()和bind()其实在用法上基本上没有任何区别了，所以我们可以认为on()只是比bind()多了一个可选的’selector’参数，所以on()可以非常方便的换掉bind()</p></blockquote><h4 id="替换live"><a href="#替换live" class="headerlink" title="替换live()"></a>替换live()</h4><blockquote><p>在1.4之前相信大家非常喜欢使用live(),因为它可以把事件绑定到当前以及以后添加的元素上面，当然在1.4之后delegate()也可以做类似的事情了。live()的原理很简单，它是通过document进行事件委派的，因此我们也可以使用on()通过将事件绑定到document来达到live()一样的效果。</p></blockquote><h4 id="live-写法"><a href="#live-写法" class="headerlink" title="live()写法"></a>live()写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(&apos;#list li&apos;).live(&apos;click&apos;, &apos;#list li&apos;, </div><div class="line">function() &#123;</div><div class="line">//function code here.</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h4 id="on-写法"><a href="#on-写法" class="headerlink" title="on()写法"></a>on()写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(document).on(&apos;click&apos;, &apos;#list li&apos;, </div><div class="line">function() &#123;</div><div class="line"> //function code </div><div class="line">here.</div><div class="line">&#125;);</div></pre></td></tr></table></figure><blockquote><p>这里的关键就是第二个参数’selector’在起作用了。它是一个过滤器的作用，只有被选中元素的后代元素才会触发事件。</p></blockquote><h4 id="替换delegate"><a href="#替换delegate" class="headerlink" title="替换delegate()"></a>替换delegate()</h4><blockquote><p>delegate()是1.4引入的，目的是通过祖先元素来代理委派后代元素的事件绑定问题，某种程度上和live()优点相似。只不过live()是通过document元素委派，而delegate则可以是任意的祖先节点。使用on()实现代理的写法和delegate()基本一致。</p></blockquote><h4 id="delegate-的写法"><a href="#delegate-的写法" class="headerlink" title="delegate()的写法"></a>delegate()的写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(&apos;#list&apos;).delegate(&apos;li&apos;, &apos;click&apos;, </div><div class="line">function() &#123;</div><div class="line"> //function code here.</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h4 id="on-写法-1"><a href="#on-写法-1" class="headerlink" title="on()写法"></a>on()写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(&apos;#list&apos;).on(&apos;click&apos;, &apos;li&apos;, function() </div><div class="line">&#123;</div><div class="line"> //function code here.</div><div class="line">&#125;);</div></pre></td></tr></table></figure><blockquote><p>貌似第一个和第二个参数的顺序颠倒了一下，别的基本一样。</p></blockquote><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote><p>jQuery推出on()的目的有2个，一是为了统一接口，二是为了提高性能，所以从现在开始用on()替换bind(),<br>live(),<br>delegate吧。尤其是不要再用live()了，因为它已经处于不推荐使用列表了，随时会被干掉。如果只绑定一次事件，那接着用one()吧，这个没有变化。<br>jQuery是 一款优秀的JavaScript框架,在旧版里主要用bind()方法，在新版里又多了两种One(),Live()<br>下面介绍这几种方法的使用：</p></blockquote><h4 id="1-bind-Unbind"><a href="#1-bind-Unbind" class="headerlink" title="1. bind/Unbind"></a>1. bind/Unbind</h4><blockquote><p>在jquery的事件模型中，有两个基本的事件绑 定函数，bind与unbind，这两个函数的含义就是匹配页面元素进行相关事件的处理。比如我们在JS中经常使用到的 onfocus，onblur，onmouseover，onmousedown等事件都可以作为bind的参数进行传递。<br>$(“#id”).bind(‘click’,function(){alert(‘tt!’)});<br>其中bind的第一个参数代表的含义是：事件类型(注意不需要加on)，function中的代码就是你要执行的逻辑 代码<br>多个事件绑定：bind还允许你绑定多个事件，事件名字之间用空格隔开，例如：<br>$(‘a’).bind(‘click mouseover’,function(){<br>在最新的jquery1.4版本中，对bind方法进行了改进，你可以在bind方法传入一个类JSON对象来一次绑定多 个事件处理函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$(&apos;a&apos;).bind(&#123;</div><div class="line">click:function()&#123;</div><div class="line">alert(&apos;a&apos;);</div><div class="line">&#125;,</div><div class="line">mouseover:function()&#123;</div><div class="line">alert(&apos;a again!&apos;)</div><div class="line">&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><p>在function函数中，你还可以通过传递一个javaScript对 象给function方法，这个事件对象通常是可以省略的。<br>bind中还有一个参数data， 该参数一般情况下很少使用，通常为了解决在同一个方法中处理同一个变量时有很好的处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var productname=&quot;Sports Shoes&quot;;</div><div class="line">$(&apos;#Area&apos;).bind(&apos;click&apos;,function()&#123;</div><div class="line">alert(productname);</div><div class="line">&#125;);</div><div class="line">productname=&quot;necklace&quot;,</div><div class="line">$(&apos;#Area&apos;).bind(&apos;click&apos;,function()&#123;</div><div class="line">alert(productname);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p><p>由于变量productname被重新赋值，所以输出的消息都是”necklace”,这里不了解可以去查阅下关于JavaScript的变量作用域,要 解决这个问题就必须使用到data参数，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var productname=&quot;Sports Shoes&quot;;</div><div class="line">$(&apos;#Area&apos;).bind(&apos;click&apos;,&#123;pn:productname&#125;,function()&#123;</div><div class="line">alert(event.data.pn);</div><div class="line">&#125;);</div><div class="line">productname=&quot;necklace&quot;,</div><div class="line">$(&apos;#Area&apos;).bind(&apos;click&apos;,&#123;pn:productname&#125;,function()&#123;</div><div class="line">alert(event.data.pn);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p></blockquote><h4 id="2-One"><a href="#2-One" class="headerlink" title="2. One"></a>2. One</h4><p>为每一个匹配元素的特定事件（像click）绑定一个一次性的事件处理函数。该方法与bind方法的参数一样，与bind方法的区别就是只对匹配元素的事 件处理执行一次，执行完之后，以后再也不会执行,当然重新发起web请求时它又会执行一次。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;a&apos;).one(&apos;click&apos;,function()&#123;</div><div class="line">alert(&apos;a&apos;);</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><blockquote><p>单击页面上的a元素后，弹出消息，除非用户发起第二次请求，否则再次点击a元素不会弹出消息对话框。</p></blockquote><h4 id="3-live"><a href="#3-live" class="headerlink" title="3. live"></a>3. live</h4><p>该方法主要是能处理动态添加的元素，给那些后添加的元素也一样绑定事件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;a&apos;).live(&apos;click,function()&#123;</div><div class="line">alert(&apos;show message!&apos;);</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><blockquote><p>然后如果我添加一个元素，<br>$(‘body’).appnend(‘Another Element’);<br>那么该元素也会被触发事件处理函数alert。<br>另外，jQuery还提供了一些绑定这些标准事件类型的简单方式，比如.click()用于简化.bind(‘click’)。<br>一共有以下这些事件名称：blur, focus, focusin, focusout, load, resize, scroll, unload, click, dblclick, mousedown, mouseup, mousemove, mouseover, mouseout, mouseenter, mouseleave, change, select, submit, keydown, keypress, keyup, error 等。<br>下面看下jQuery中绑定事件bind() on() live() one()的异同<br>jQuery中绑定事件的四种方法，他们可以同时绑定一个或多个事件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bind()----------版本号小于3.0（在Jquery3.0中已经移除，相应unbind()也移除）</div><div class="line">live()----------版本号小于1.7（在Jquery1.7中已经移除，相应die()也移除）</div><div class="line">delegate()------版本号小于1.7（在Jquery1.7中已经移除）</div><div class="line">on()------------版本号大于1.7（在Jquery1.7中添加，相应off()也添加）</div></pre></td></tr></table></figure></p><p>A：bind()事件的用法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;title&gt;绑定事件&lt;/title&gt;</div><div class="line"> &lt;script src=&quot;js/jQuery1.11.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div><div class="line"> &lt;script&gt;</div><div class="line">  $(function () &#123;</div><div class="line">   $(&quot;p&quot;).bind(&#123;</div><div class="line">    &quot;mouseover&quot;: function () &#123;</div><div class="line">     $(&quot;p&quot;).css(&quot;background-color&quot;, &quot;red&quot;);</div><div class="line">    &#125;,</div><div class="line">    &quot;mouseout&quot;: function () &#123;</div><div class="line">     $(&quot;p&quot;).css(&quot;background-color&quot;, &quot;&quot;);</div><div class="line">    &#125;</div><div class="line">   &#125;);</div><div class="line">  &#125;);</div><div class="line"> &lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"> &lt;p&gt;what are you doing?&lt;/p&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p><p>第一个最大的区别就是：bind()的事件绑定是只对当前页面选中的元素有效。如果你想对动态创建的元素bind()事件，是没有办法达到效果的。<br>在后面的动态生成DOM元素绑定事件就要使用on();</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;on-events-selector-data-fn&quot;&gt;&lt;a href=&quot;#on-events-selector-data-fn&quot; class=&quot;headerlink&quot; title=&quot;on(events,[selector],[data],fn)&quot;&gt;&lt;/a&gt;on(
      
    
    </summary>
    
      <category term="jQuery" scheme="https://zhipenwang.github.io/categories/jQuery/"/>
    
    
      <category term="Web前端" scheme="https://zhipenwang.github.io/tags/Web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>js 比较几种遍历数组及对象的方式</title>
    <link href="https://zhipenwang.github.io/2018/05/13/js_4/"/>
    <id>https://zhipenwang.github.io/2018/05/13/js_4/</id>
    <published>2018-05-13T03:26:43.661Z</published>
    <updated>2018-05-13T03:42:20.677Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>通常我们会用循环的方式来遍历数组。但是循环是 导致js 性能问题的原因之一。<br>一般我们会采用下几种方式来进行数组的遍历：</p></blockquote><h3 id="方式1：for-in-循环"><a href="#方式1：for-in-循环" class="headerlink" title="方式1：for in 循环"></a>方式1：for in 循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3,4,5];</div><div class="line">var obj = &#123; a : 1, b : 2, c : 3 &#125;;</div><div class="line">for( var item in arr|obj )&#123;</div><div class="line">        fn(item)&#123;</div><div class="line">                // do sth with arr[item];</div><div class="line">                //do sth wtih obj[item];</div><div class="line">        &#125;;</div><div class="line">&#125;</div><div class="line">这里的 item：</div><div class="line">        array 的索引值，对应于 arr 的下标值；</div><div class="line">        object 的 key 值，对应于 obj 的 a,b,c；</div></pre></td></tr></table></figure><h3 id="方式2：for-循环"><a href="#方式2：for-循环" class="headerlink" title="方式2：for 循环"></a>方式2：for 循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for (var i=0; i&lt;arr.length; i++)&#123;</div><div class="line">        //do sth with arr[i];</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>这两种方法应该非常常见且使用很频繁。但实际上，这两种方法都存在性能问题。<br>在方式1中，for-in 需要分析出array 的每个属性，这个操作性能开销很大。用在 key 已知的数组上是非常不划算的。所以尽量不要用 for-in，除非你不清楚要处理哪些属性，例如 JSON 对象这样的情况。<br>在方式2中，循环每进行一次，就要检查一下数组长度。读取属性（数组长度）要比读局部变量慢，尤其是当 array 里存放的都是 DOM 元素，因为每次读取都会扫描一遍页面上的选择器相关元素，速度会大大降低。<br>所以这时候我们就有必要对方式2进行优化。</p></blockquote><h4 id="加速的"><a href="#加速的" class="headerlink" title="加速的"></a>加速的</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3,4,5];</div><div class="line">var length =arr.length;</div><div class="line">for(var i=0; i&lt;length; i++)&#123;</div><div class="line">　　fn(arr[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>现在只需要读取一次 array 的 length 属性，速度已经加快了。但是还能不能更快呢？<br>事实是，如果循环终止条件不进行比较运算，那么循环的速度还可以更快。</p></blockquote><h4 id="加速且优雅的"><a href="#加速且优雅的" class="headerlink" title="加速且优雅的"></a>加速且优雅的</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3,4,5];</div><div class="line">var i = arr.length;</div><div class="line">while(i--)&#123;</div><div class="line">        fn(arr[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="方式-3：forEach"><a href="#方式-3：forEach" class="headerlink" title="方式 3：forEach"></a>方式 3：forEach</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3,4,5];</div><div class="line">arr.forEach(</div><div class="line">        fn(value,index)&#123;</div><div class="line">                //Do sth with value ;</div><div class="line">        &#125;</div><div class="line">)</div></pre></td></tr></table></figure><blockquote><p>注意：<br>这里的 forEach回调中两个参数分别为 value，index，其位置刚好和 jQuery 的$.each 相反；<br>forEach 无法遍历对象；<br>IE不支持该方法；Firefox 和 chrome 支持；<br>forEach 无法使用 break，continue 跳出循环，且使用 return 是跳过本次循环；<br>可以添加第二个参数，为一个数组，回调中的 this 会指向这个数组，若没有添加，则是指向 window；</p></blockquote><p>关于跳出循环的几种方式：</p><ol><li>return ==》结束循环并中断函数执行；</li><li>break ==》结束循环函数继续执行；</li><li>continue ==》跳过本次循环；</li></ol><blockquote><p>for 循环中的变量 i，由于 ES5并没有块级作用域的存在，它在循环结束以后仍然存在于内存中，所以建议使用函数自执行的方式来避免。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;通常我们会用循环的方式来遍历数组。但是循环是 导致js 性能问题的原因之一。&lt;br&gt;一般我们会采用下几种方式来进行数组的遍历：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;方式1：for-in-循环&quot;&gt;&lt;a href=&quot;#方式1：for-i
      
    
    </summary>
    
      <category term="jQuery" scheme="https://zhipenwang.github.io/categories/jQuery/"/>
    
    
      <category term="Web前端" scheme="https://zhipenwang.github.io/tags/Web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>js与jquery关于验证页面元素存在的方法及不同之处</title>
    <link href="https://zhipenwang.github.io/2018/05/05/js_3/"/>
    <id>https://zhipenwang.github.io/2018/05/05/js_3/</id>
    <published>2018-05-05T10:35:29.639Z</published>
    <updated>2018-05-05T11:06:10.024Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在javascript中我们可以通过以下代码判断页面中是否存在某个元素</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">obj = document.getElementById(&quot;someID&quot;);</div><div class="line">if (obj) &#123;</div><div class="line">     obj.innerText(&quot;Extsts&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>那么在jQuery，我们如何判断页面元素存在与否呢？如果参照上面的传统Javascript的写法，我们第一个想到的办法会是：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if ($(&quot;#someID&quot;))&#123;</div><div class="line">      $(&quot;#someID&quot;).text(&quot;hi&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>可是这么写是不对的！因为<strong>jQuery对象永远都有返回值</strong>，所以$(“someID”) 总是TRUE ，IF语句没有起到任何判断作用。<br>我们知道，jQuery选择器获取页面的element时，无论element是否存在，都会返回一个对象。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var my_element = $(&quot;#element_Id&quot; );</div></pre></td></tr></table></figure></p><p>此时的变量my_element就是一个对象，既然是一个对象，这个对象就具有length的属性，因此，用以下代码可以判断元素（对象）是否存在</p><p>正确的写法应该是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if ( $(&quot;#someID&quot;).length &gt; 0 ) &#123;</div><div class="line">     $(&quot;#someID&quot;).text(&quot;Extsts&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><blockquote><p>注意 ：判断某个页面元素存在与否在jQuery实际上是没有必要的，jQuery本身会忽略 对一个不存在的元素进行操作，并且不会报错, 所以这么写代码会存在bug。<br>假如不存在someID这个元素，我们照样可以执行一下代码，并不会报错。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var value=$(&apos;#someID&apos;).length;</div><div class="line">if(value&gt;0)&#123;</div><div class="line">     alert(&apos;Extsts&apos;);</div><div class="line">&#125;else&#123;</div><div class="line">      alert(&apos;not Extsts&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>JS判断变量是否为空或是否null<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/** </div><div class="line">* 判断是否null </div><div class="line">* @param data </div><div class="line">*/ </div><div class="line">function isNull(data)&#123; </div><div class="line">return (data == &quot;&quot; || data == undefined || data == null) ? &quot;暂无&quot; : data; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在javascript中我们可以通过以下代码判断页面中是否存在某个元素&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;di
      
    
    </summary>
    
      <category term="jQuery" scheme="https://zhipenwang.github.io/categories/jQuery/"/>
    
    
      <category term="Web前端" scheme="https://zhipenwang.github.io/tags/Web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>jQuery对于父子、同级元素的处理方式</title>
    <link href="https://zhipenwang.github.io/2018/05/01/js_2/"/>
    <id>https://zhipenwang.github.io/2018/05/01/js_2/</id>
    <published>2018-05-01T02:48:45.663Z</published>
    <updated>2018-05-01T03:01:56.396Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>上一节介绍了一些关于表单处理的元素内容<br>本节介绍jquery对于父、同级、子元素的处理方式。</p></blockquote><h3 id="父窗口与子窗口处理"><a href="#父窗口与子窗口处理" class="headerlink" title="父窗口与子窗口处理"></a>父窗口与子窗口处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">父窗口：</div><div class="line">&lt;input name=&apos;img&apos; type=&apos;text&apos; /&gt;</div><div class="line">&lt;img id=&apos;img&apos; src=&apos;&apos; /&gt;</div><div class="line">layer.open(&#123;</div><div class="line">    type: 2,</div><div class="line">    title: &apos;title&apos;,</div><div class="line">    area: [&apos;500px&apos;, &apos;350px&apos;],</div><div class="line">    content &apos;son.html&apos;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">子窗口：</div><div class="line">var img_url;</div><div class="line">parent.$(&quot;input[name=&apos;img&apos;]&quot;).val(img_url);</div><div class="line">parent.$(&apos;#img&apos;).attr(&apos;src&apos;, img_url);</div><div class="line">parent.layer.closeAll();</div></pre></td></tr></table></figure><h2 id="jQuery获取父元素节点、子元素节点及兄弟元素节点的方法"><a href="#jQuery获取父元素节点、子元素节点及兄弟元素节点的方法" class="headerlink" title="jQuery获取父元素节点、子元素节点及兄弟元素节点的方法"></a>jQuery获取父元素节点、子元素节点及兄弟元素节点的方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;ul class=&quot;par&quot;&gt;</div><div class="line">&lt;li id=&quot;firstli&quot;&gt;</div><div class="line">&lt;h3 class=&quot;title&quot;&gt;one&lt;/h3&gt;</div><div class="line">&lt;ul class=&quot;par&quot;&gt;</div><div class="line">&lt;li id=&quot;one&quot;&gt;one_first&lt;/li&gt;</div><div class="line">&lt;li&gt;two_first&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure><h3 id="jquery父节点的获取"><a href="#jquery父节点的获取" class="headerlink" title="jquery父节点的获取"></a>jquery父节点的获取</h3><h4 id="使用parent-获取父节点"><a href="#使用parent-获取父节点" class="headerlink" title="使用parent()获取父节点"></a>使用parent()获取父节点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&quot;#one&quot;).parent().parent();  // 获取 id为firstli的li标签节点</div><div class="line">$(&quot;#one&quot;).parent().parent(&apos;.par&apos;); // 获取最上面 class为par的ul节点</div><div class="line">$(&quot;#one&quot;).parent(&apos;.par&apos;); // 获取 id为one的上一级class为par的ul节点</div></pre></td></tr></table></figure><h4 id="使用parents-和closest-获取父节点"><a href="#使用parents-和closest-获取父节点" class="headerlink" title="使用parents()和closest()获取父节点"></a>使用parents()和closest()获取父节点</h4><blockquote><ol><li>closest从当前元素开始匹配寻找，逐级向上寻找直到找到匹配的元素后就停止了，返回0或者1个元素</li><li>parents从父元素开始匹配寻找，一直向上查找直到找到根元素，将所有元素放到另外一个集合中，返回0、1或者更多元素<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$(&quot;#one&quot;).parnets(&apos;.par&apos;);  // 找出所有class为par的父节点/父父节点</div><div class="line">$(&quot;one&quot;).closest(&apos;.par&apos;);  // 获取最近一层的父级class为par的ul节点</div></pre></td></tr></table></figure></li></ol></blockquote><h3 id="jquery兄弟节点的获取"><a href="#jquery兄弟节点的获取" class="headerlink" title="jquery兄弟节点的获取"></a>jquery兄弟节点的获取</h3><h4 id="parent父节点再find子节点"><a href="#parent父节点再find子节点" class="headerlink" title="parent父节点再find子节点"></a>parent父节点再find子节点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;.title&apos;).parent().find(&apos;ul&apos;);  // 找到class为title的兄弟节点ul，即class为par的ul</div></pre></td></tr></table></figure><h4 id="sibingls-获取兄弟节点"><a href="#sibingls-获取兄弟节点" class="headerlink" title="sibingls()获取兄弟节点"></a>sibingls()获取兄弟节点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;.title&apos;).sibings(&apos;ul&apos;);  // 找到class为title的兄弟节点ul，即class为par的ul</div></pre></td></tr></table></figure><h3 id="jquery子节点的获取"><a href="#jquery子节点的获取" class="headerlink" title="jquery子节点的获取"></a>jquery子节点的获取</h3><h4 id="first方式"><a href="#first方式" class="headerlink" title=":first方式"></a>:first方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;.par:first-child&apos;);  // 获取id为firstli的li节点</div></pre></td></tr></table></figure><h4 id="选择器获取"><a href="#选择器获取" class="headerlink" title="选择器获取"></a>选择器获取</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;#firstli h3.title&apos;);  // 获取class为title的h3节点</div></pre></td></tr></table></figure><h4 id="find-函数"><a href="#find-函数" class="headerlink" title="find()函数"></a>find()函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;#firstli&apos;).find(&apos;h3&apos;);  // 获取class为title的h3节点</div></pre></td></tr></table></figure><h4 id="children-函数"><a href="#children-函数" class="headerlink" title="children()函数"></a>children()函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;#firstli&apos;).children(&apos;h3.title&apos;);   // 获取class为title的h3节点</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;上一节介绍了一些关于表单处理的元素内容&lt;br&gt;本节介绍jquery对于父、同级、子元素的处理方式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;父窗口与子窗口处理&quot;&gt;&lt;a href=&quot;#父窗口与子窗口处理&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="jQuery" scheme="https://zhipenwang.github.io/categories/jQuery/"/>
    
    
      <category term="Web前端" scheme="https://zhipenwang.github.io/tags/Web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>jQuery获取表单值及属性内容</title>
    <link href="https://zhipenwang.github.io/2018/04/21/js_1/"/>
    <id>https://zhipenwang.github.io/2018/04/21/js_1/</id>
    <published>2018-04-21T12:21:01.000Z</published>
    <updated>2018-05-01T03:01:27.933Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>平时前端在处理表单数据的时候，总是需要通过表单属性或者值来进行一些用户看不到的处理。<br>比如：联动选项的处理、数据的验证过滤等。<br>本节针对不同的表单内容进行了不同的获取方式。</p></blockquote><h3 id="获取当前表单元素的值"><a href="#获取当前表单元素的值" class="headerlink" title="获取当前表单元素的值"></a>获取当前表单元素的值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; name=&quot;name&quot; onblur=&quot;getValue(this)&quot;&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">function getValue(obj)&#123;</div><div class="line">    // 获取值</div><div class="line">$(obj).val();</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure><h3 id="获取表单元素值及属性内容"><a href="#获取表单元素值及属性内容" class="headerlink" title="获取表单元素值及属性内容"></a>获取表单元素值及属性内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</div><div class="line">&lt;select name=&quot;sex&quot; data-type=&quot;sex&quot; field=&quot;sex&quot;&gt;</div><div class="line">&lt;option value=&quot;man&quot;&gt;男&lt;/option&gt;</div><div class="line">&lt;option value=&quot;woman&quot;&gt;女&lt;/option&gt;</div><div class="line">&lt;/select&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">function do_submit(obj)&#123;</div><div class="line">    // 获取值</div><div class="line">var name = $(&quot;input[name=&apos;name&apos;]&quot;).val();</div><div class="line">var sex_value = $(&quot;select[name=&apos;sex&apos;]&quot;).val();</div><div class="line">// 获取特定文本值的数据</div><div class="line">    $(&apos;select[name=&quot;data[select]&quot;] [value=&quot;man&quot;]&apos;).val();</div><div class="line">// 获取文本值</div><div class="line">var sex_text = $(&quot;select[name=&apos;sex&apos;]&quot;).find(&apos;option:selected&apos;).text();</div><div class="line">// 获取data-type属性值</div><div class="line">var sex_type = $(&quot;select[name=&apos;sex&apos;]&quot;).data(&apos;type&apos;);</div><div class="line">var sex_type = $(&quot;select[name=&apos;sex&apos;]&quot;).attr(&apos;data-type&apos;);</div><div class="line">// 获取field属性值</div><div class="line">var sex_field = $(&quot;select[name=&apos;sex&apos;]&quot;).attr(&apos;field&apos;);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure><h3 id="获取多个多行文本框内容值"><a href="#获取多个多行文本框内容值" class="headerlink" title="获取多个多行文本框内容值"></a>获取多个多行文本框内容值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;textarea name=&quot;formula[]&quot; class=&quot;text&quot;&gt;&lt;/textarea&gt;</div><div class="line">&lt;textarea name=&quot;formula[]&quot; class=&quot;text&quot;&gt;&lt;/textarea&gt;</div><div class="line">&lt;textarea name=&quot;formula[]&quot; class=&quot;text&quot;&gt;&lt;/textarea&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">    var formula = new Array();</div><div class="line">$(&quot;.text,textarea&quot;).each(function(e)&#123;</div><div class="line">    formula.push($(this).val());</div><div class="line">&#125;)</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;平时前端在处理表单数据的时候，总是需要通过表单属性或者值来进行一些用户看不到的处理。&lt;br&gt;比如：联动选项的处理、数据的验证过滤等。&lt;br&gt;本节针对不同的表单内容进行了不同的获取方式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;获取当前表
      
    
    </summary>
    
      <category term="jQuery" scheme="https://zhipenwang.github.io/categories/jQuery/"/>
    
    
      <category term="Web前端" scheme="https://zhipenwang.github.io/tags/Web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>更换电脑后的博客续写</title>
    <link href="https://zhipenwang.github.io/2018/04/04/change_do_hexo/"/>
    <id>https://zhipenwang.github.io/2018/04/04/change_do_hexo/</id>
    <published>2018-04-04T05:21:01.000Z</published>
    <updated>2018-04-05T01:55:07.680Z</updated>
    
    <content type="html"><![CDATA[<p>当重装电脑之后，或者想在其他电脑上修改博客，可以使用下列步骤：</p><ol><li>使用git clone git@github.com:zhipenwang/zhipenwang.github.io.git拷贝仓库（默认分支为master）；</li><li><p>在本地新拷贝的<a href="http://zhipenwang.github.io文件夹下通过Git" target="_blank" rel="external">http://zhipenwang.github.io文件夹下通过Git</a> bash依次执行下列指令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm install hexo</div><div class="line">npm install</div><div class="line">npm install hexo-deployer-git</div></pre></td></tr></table></figure><p> （记得，不需要hexo init这条指令）。</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;当重装电脑之后，或者想在其他电脑上修改博客，可以使用下列步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用git clone git@github.com:zhipenwang/zhipenwang.github.io.git拷贝仓库（默认分支为master）；&lt;/li&gt;
&lt;li&gt;&lt;p
      
    
    </summary>
    
      <category term="搭建博客" scheme="https://zhipenwang.github.io/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="hexo" scheme="https://zhipenwang.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>git 误删分支恢复方法</title>
    <link href="https://zhipenwang.github.io/2018/03/28/git_recover_branch/"/>
    <id>https://zhipenwang.github.io/2018/03/28/git_recover_branch/</id>
    <published>2018-03-28T10:21:01.000Z</published>
    <updated>2018-03-28T11:37:50.382Z</updated>
    
    <content type="html"><![CDATA[<ul><li>在使用git的时候，有时候会因为人为因素导致分支（commit）被删除，可以使用如下步骤进行恢复。</li></ul><h3 id="首先使用以下步骤创建一个新分支，修改一些文件后删除，以便进行恢复"><a href="#首先使用以下步骤创建一个新分支，修改一些文件后删除，以便进行恢复" class="headerlink" title="首先使用以下步骤创建一个新分支，修改一些文件后删除，以便进行恢复"></a>首先使用以下步骤创建一个新分支，修改一些文件后删除，以便进行恢复</h3><p>1、创建分支hexo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch hexo</div></pre></td></tr></table></figure></p><p>2、查看分支列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git branch -a</div><div class="line">  * master</div><div class="line">hexo</div></pre></td></tr></table></figure></p><p>3、切换到hexo分支，随便修改一下东西后commit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git checkout hexo</div><div class="line"></div><div class="line">echo &apos;hexo&apos; &gt; test.txt</div><div class="line"></div><div class="line">git add .</div><div class="line">git commit -m &apos;add test.txt&apos;</div></pre></td></tr></table></figure></p><p>4、删除分支<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch -D hexo</div></pre></td></tr></table></figure></p><p>5、查看分支列表，hexo分支已经不存在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch -a</div><div class="line">  * master</div></pre></td></tr></table></figure></p><h2 id="恢复步骤如下"><a href="#恢复步骤如下" class="headerlink" title="恢复步骤如下"></a>恢复步骤如下</h2><p>1、使用git log -g 找回之前提交的commit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">commit 3eac14d05bc1264cda54a7c21f04c3892f32406a</div><div class="line">Reflog: HEAD@&#123;1&#125; (fdipzone &lt;fdipzone@sina.com&gt;)</div><div class="line">Reflog message: commit: add test.txt</div><div class="line">Author: fdipzone &lt;fdipzone@sina.com&gt;</div><div class="line">Date:   Sun Jan 31 22:26:33 2016 +0800</div><div class="line"></div><div class="line">    add test.txt</div></pre></td></tr></table></figure></p><p>2、使用 git branch recover_branch[新分支] commit_id 命令，用这个commit创建一个分支<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git branch recover_branch_hexo 3eac14d05bc1264cda54a7c21f04c3892f32406a</div><div class="line"></div><div class="line">git branch -a</div><div class="line">* master</div><div class="line">  recover_branch_hexo</div></pre></td></tr></table></figure></p><p>这个时候，可以看到 recover_branch_hexo分支已经创建了。<br>3、切换到recover_branch_hexo分支，检查文件是否存在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout recover_branch_hexo</div><div class="line">ls -lt</div></pre></td></tr></table></figure></p><p>这样就可以恢复误删除的分支了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;在使用git的时候，有时候会因为人为因素导致分支（commit）被删除，可以使用如下步骤进行恢复。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;首先使用以下步骤创建一个新分支，修改一些文件后删除，以便进行恢复&quot;&gt;&lt;a href=&quot;#首先使用以下步骤创建一个新分支，修改
      
    
    </summary>
    
      <category term="GIT" scheme="https://zhipenwang.github.io/categories/GIT/"/>
    
    
      <category term="GIT" scheme="https://zhipenwang.github.io/tags/GIT/"/>
    
  </entry>
  
  <entry>
    <title>git 配置ssh密钥</title>
    <link href="https://zhipenwang.github.io/2018/03/27/ssh_key/"/>
    <id>https://zhipenwang.github.io/2018/03/27/ssh_key/</id>
    <published>2018-03-27T11:21:01.000Z</published>
    <updated>2018-03-28T12:01:00.926Z</updated>
    
    <content type="html"><![CDATA[<p>在github帐号注册好之后，将项目clone到本地，加入git bash命令。<br>1、输入cd ~/.ssh 回车，查看是否有ssh key密钥，有了就备份</p><p><center><br><img src="/img/ssh_dir.png" alt=""><br></center><br>2、创建ssh key，输入下面命令回车，之后会让你输入github的账号密码，如图<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C &quot;youremail@youremail.com&quot;</div><div class="line"></div><div class="line">Creates a new ssh key using the provided email # Generating public/private rsa key pair.</div><div class="line"></div><div class="line">Enter file in which to save the key (/home/you/.ssh/id_rsa):</div></pre></td></tr></table></figure></p><p>直接按Enter就行。然后，会提示你输入密码，如下(建议输一个，安全一点，当然不输也行，应该不会有人闲的无聊冒充你去修改你的代码)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Enter same passphrase again: [Type passphrase again]</div></pre></td></tr></table></figure></p><p>完了之后，大概是这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Your public key has been saved in /home/you/.ssh/id_rsa.pub.</div><div class="line">The key fingerprint is: # 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@youremail.com</div></pre></td></tr></table></figure></p><p><center><br><img src="/img/ssh_gen.png" alt=""><br></center><br>3、找到本地id_rsa.pub文件，复制里面的内容，这就是ssh密钥，可以通过pwd命令来查看当前文件位置</p><p><center><br><img src="/img/ssh_pwd.png" alt=""><br></center></p><p><center><br><img src="/img/ssh_key_dir.png" alt=""><br></center><br>4、登录github，在个人中心的setting中，找到 SSH and GPG keys</p><p><center><br><img src="/img/github_ssh.png" alt=""><br></center><br>点击 new ssh key，将复制的ssh密钥粘贴进 “key”文本框，title随便输入即可。<br>点击add key。<br>添加ssh密钥到远程仓库完成。<br>5、验证ssh是否可用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -T git@github.com</div></pre></td></tr></table></figure></p><p>返回如下表示正常可用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hi xxx! You&apos;ve successfully authenticated, but GitHub does not # provide shell access.</div></pre></td></tr></table></figure></p><p>6、此时查看你的远程分支地址是否是ssh协议的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line">origin https://github.com/zhipenwang/zhipenwang.git (fetch)</div><div class="line">origin https://github.com/zhipenwang/zhipenwang.git (push)</div></pre></td></tr></table></figure></p><p>如果是https协议，修改为ssh协议：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote set-url origin git@github.com:zhipenwang/zhipenwang.git</div></pre></td></tr></table></figure></p><p>这个时候就可以进行push了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在github帐号注册好之后，将项目clone到本地，加入git bash命令。&lt;br&gt;1、输入cd ~/.ssh 回车，查看是否有ssh key密钥，有了就备份&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;br&gt;&lt;img src=&quot;/img/ssh_dir.png&quot; alt=&quot;&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="GIT" scheme="https://zhipenwang.github.io/categories/GIT/"/>
    
    
      <category term="GIT" scheme="https://zhipenwang.github.io/tags/GIT/"/>
    
  </entry>
  
  <entry>
    <title>初始算法</title>
    <link href="https://zhipenwang.github.io/2018/02/13/algorithm/"/>
    <id>https://zhipenwang.github.io/2018/02/13/algorithm/</id>
    <published>2018-02-13T09:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.132Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>算法：程序的灵魂</p><p>算法：algorithm</p></blockquote><p>算法五大特征：</p><ul><li>1、有穷性：保证执行有限步骤后结束</li><li>2、确切性：每一步骤都有确切的意义</li><li>3、输入：每个算法都有零个或多个输入，以刻画运算对象的初始情况，所谓零个输入是指算法本身定除了初始条件</li><li>4、输出：每个算法都有一个或多个输出，显示对输入数据加工后的结果。没有输出的算法是毫无意义的</li><li>5、可行性：在原则上算法能够精确地运行，进行优先次运算后即可完成的一种运算。</li></ul><blockquote><p>算法的逻辑、流程。<br>计算机中的算法，分为两大类：数值运算算法（求解数值）、非数值运算算法（事务管理领域）。<br>算法是计算机处理信息的本质，因为计算机程序本质上是一个算法，告诉计算机确切的步骤来执行一个指定的任务。</p><p>著名计算机科学家沃思公式：数据结构+算法=程序。</p></blockquote><p>一个程序应当采用结构化程序设计方法进行程序设计，并且用某一种计算机语言来表示，因此，下面的公式更加贴切：</p><blockquote><p>程序=算法+数据结构+程序设计方法+语言和环境</p></blockquote><h3 id="流程图来表示算法："><a href="#流程图来表示算法：" class="headerlink" title="流程图来表示算法："></a>流程图来表示算法：</h3><p><img src="/img/screenshot_1513006093776.png" alt=""></p><blockquote><p>流程图的结构：顺序结构、选择结构、循环结构</p></blockquote><h3 id="N-S图"><a href="#N-S图" class="headerlink" title="N-S图"></a>N-S图</h3><blockquote><p>N-S流程图：代表计算机的算法。由一些特定意义的图像、流程线及简要的文字说明构成，能够清晰明确的表示程序的运行过程。（整个程序写在一个大框图内，由若干个小的基础框图构成，简称N-S图）</p></blockquote><p><img src="/img/screenshot_1513006588835.png" alt=""></p><h3 id="计算机语言的算法表示"><a href="#计算机语言的算法表示" class="headerlink" title="计算机语言的算法表示"></a>计算机语言的算法表示</h3><p>计算机语言表示算法的时候，必须严格遵循使用语言的语法规则。</p><h3 id="学好算法的秘诀"><a href="#学好算法的秘诀" class="headerlink" title="学好算法的秘诀"></a>学好算法的秘诀</h3><p>1、学的深入，基础扎实<br>2、恒心、演练、举一反三<br>3、语言之争的时代更要学会坚持</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;算法：程序的灵魂&lt;/p&gt;
&lt;p&gt;算法：algorithm&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;算法五大特征：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1、有穷性：保证执行有限步骤后结束&lt;/li&gt;
&lt;li&gt;2、确切性：每一步骤都有确切的意义&lt;/li&gt;
&lt;li
      
    
    </summary>
    
      <category term="算法与结构" scheme="https://zhipenwang.github.io/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="算法" scheme="https://zhipenwang.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="结构" scheme="https://zhipenwang.github.io/tags/%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>composer安装与使用</title>
    <link href="https://zhipenwang.github.io/2017/04/21/composer-1/"/>
    <id>https://zhipenwang.github.io/2017/04/21/composer-1/</id>
    <published>2017-04-21T11:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.135Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>1、点击下载：<a href="https://getcomposer.org/download/" target="_blank" rel="external">composer</a></p><center><br><img src="/img/composer-1-1.png" alt=""><br></center><br>2、下载好之后双击直接安装，Next即可：<br><br><center><br><img src="/img/composer-1-2.png" alt=""><br></center><br>3、然后选择php.exe文件：<br><br><center><br><img src="/img/composer-1-3.png" alt=""><br></center><p>接下来就一直next到安装完成即可。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><blockquote><p>[info]使用composer安装ThinkPHP5</p></blockquote><p>通过<a href="https://pkg.phpcomposer.com/" target="_blank" rel="external">composer中国镜像</a>进行初步了解<br><img src="/img/composer-1-4.png" alt=""></p><p>##开始命令行操作</p><h3 id="1、中国镜像下载"><a href="#1、中国镜像下载" class="headerlink" title="1、中国镜像下载"></a>1、中国镜像下载</h3><p>参考<a href="http://www.kancloud.cn/thinkphp/thinkphp5_quickstart/145249" target="_blank" rel="external">tp5看云文档</a></p><p>由于国外网站访问很慢，国内提供了很好的镜像，所以使用国内镜像：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Composer config -g repo.packagist composer https://packagist.phpcomposer.com</div></pre></td></tr></table></figure></p><p><img src="/img/composer-1-5.png" alt=""></p><h3 id="2、下载tp5框架"><a href="#2、下载tp5框架" class="headerlink" title="2、下载tp5框架"></a>2、下载tp5框架</h3><p>进入站点根目录www操作命令行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer create-project topthink/think tp5  --prefer-dist</div></pre></td></tr></table></figure></p><p>其中tp5可写填写任何你愿意的名称<br><img src="/img/composer-1-6.png" alt=""></p><h2 id="框架安装完成"><a href="#框架安装完成" class="headerlink" title="框架安装完成"></a>框架安装完成</h2><p>耐心等待几分钟的安装过程，安装完成之后本地已经生成了tp5的新框架内容<br><img src="/img/composer-1-7.png" alt=""></p><h2 id="composer主要的功能：安装扩展包"><a href="#composer主要的功能：安装扩展包" class="headerlink" title="composer主要的功能：安装扩展包"></a>composer主要的功能：安装扩展包</h2><p>composer的最主要的功能：dependency manager for PHP<br>进入项目目录tp5，执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer require riverslei/payment</div></pre></td></tr></table></figure></p><p>下载riverslei/payment 集成支付宝、微信支付等流行的支付接口到项目中：<br>Composer.json中新增了这一句：<br><img src="/img/composer-1-8.png" alt=""></p><p>项目目录中也已经安装好了扩展包：<br><img src="/img/composer-1-9.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;1、点击下载：&lt;a href=&quot;https://getcomposer.org/download/&quot; target=&quot;_blank&quot; rel
      
    
    </summary>
    
      <category term="composer使用" scheme="https://zhipenwang.github.io/categories/composer%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="Composer" scheme="https://zhipenwang.github.io/tags/Composer/"/>
    
  </entry>
  
  <entry>
    <title>composer构建PHP框架——初始化</title>
    <link href="https://zhipenwang.github.io/2017/04/21/composer-2/"/>
    <id>https://zhipenwang.github.io/2017/04/21/composer-2/</id>
    <published>2017-04-21T11:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.135Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>“一个时代结束了，另一个时代开始了。”<br>Framework Interoperability Group（框架可互用性小组），简称 FIG，成立于 2009 年。FIG 最初由几位知名 PHP 框架开发者发起，在吸纳了许多优秀的大脑和强健的体魄后，提出了 PSR-0 到 PSR-4 五套 PHP 非官方规范：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">* PSR-0 (Autoloading Standard) 自动加载标准</div><div class="line"></div><div class="line">* PSR-1 (Basic Coding Standard) 基础编码标准</div><div class="line"></div><div class="line">* PSR-2 (Coding Style Guide) 编码风格向导</div><div class="line"></div><div class="line">* PSR-3 (Logger Interface) 日志接口</div><div class="line"></div><div class="line">* PSR-4 (Improved Autoloading) 自动加载优化标准</div></pre></td></tr></table></figure><h3 id="创建composer-json"><a href="#创建composer-json" class="headerlink" title="创建composer.json"></a>创建composer.json</h3><p>在网站根目录下创建新文件夹 <code>my-framework</code> （My First Framework based on Composer），然后在此文件夹内创建 <code>composer.json</code> 文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">&quot;require&quot;:&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="初始化composer"><a href="#初始化composer" class="headerlink" title="初始化composer"></a>初始化composer</h3><p>打开命令行cmd，进入刚刚新建的目录 <code>my_framework</code>，执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer update</div></pre></td></tr></table></figure></p><p>执行成功后生成了扩展包<code>vendor</code></p><center><br><img src="/img/composer-2-1.png" alt=""><br></center><br>此时目录为：<br><center><br><img src="/img/composer-2-2.png" alt=""><br></center><p>到此，composer初始化完成！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;“一个时代结束了，另一个时代开始了。”&lt;br&gt;Framework Interoperability Group（框架可互用性小组），简称 FIG，成立于 2009 年。FIG 最初由几位知名 PHP 框架开发者发起，在吸纳了许多优秀的大脑和强健的体
      
    
    </summary>
    
      <category term="composer使用" scheme="https://zhipenwang.github.io/categories/composer%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="Composer" scheme="https://zhipenwang.github.io/tags/Composer/"/>
    
  </entry>
  
  <entry>
    <title>composer构建PHP框架——构建路由</title>
    <link href="https://zhipenwang.github.io/2017/04/21/composer-3/"/>
    <id>https://zhipenwang.github.io/2017/04/21/composer-3/</id>
    <published>2017-04-21T11:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.136Z</updated>
    
    <content type="html"><![CDATA[<h2 id="路由选择安装"><a href="#路由选择安装" class="headerlink" title="路由选择安装"></a>路由选择安装</h2><p>本节开始构建路由，先去 GitHub 搜一下：<a href="https://github.com/search?l=PHP&amp;o=desc&amp;q=router&amp;ref=searchresults&amp;s=stars&amp;type=Repositories&amp;utf8=%E2%9C%93" target="_blank" rel="external">点此查看搜索结果</a></p><p>推荐 <a href="https://github.com/NoahBuscher/Macaw" target="_blank" rel="external">https://github.com/NoahBuscher/Macaw</a>，对应的 Composer 包为 noahbuscher/macaw 。</p><p>下面开始安装它，更改 composer.json：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">&quot;require&quot;:&#123;</div><div class="line">&quot;noahbuscher/macaw&quot;: &quot;dev-master&quot;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>运行 composer update，成功之后将得到以下目录：</p><p><center><br><img src="/img/composer-3-1.png" alt=""><br></center><br>至此，Macaw安装成功！</p><h2 id="站点入口文件与环境"><a href="#站点入口文件与环境" class="headerlink" title="站点入口文件与环境"></a>站点入口文件与环境</h2><p>在项目目录下新建public 文件夹，这个文件夹将是用户唯一可见的部分。在文件夹下新建 index.php 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">// Autoload 自动载入</div><div class="line">require &apos;../vendor/autoload.php&apos;;</div><div class="line"></div><div class="line">// 路由配置</div><div class="line">require &apos;../config/routes.php&apos;;</div></pre></td></tr></table></figure></p><p>上面一行表示引入 Composer 的自动载入功能，下面一行表示载入路由配置文件。<br>然后继续在项目目录下新建config文件夹，在config文件夹内新建 routs.php 文件，内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">use NoahBuscher\Macaw\Macaw;</div><div class="line"></div><div class="line">Macaw::get(&apos;fuck&apos;, function() &#123;</div><div class="line">  echo &quot;成功！&quot;;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Macaw::get(&apos;(:all)&apos;, function($fu) &#123;</div><div class="line">  echo &apos;未匹配到路由&lt;br&gt;&apos;.$fu;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Macaw::dispatch();</div></pre></td></tr></table></figure></p><p>然后访问你的地址即可：<a href="http://127.0.0.66/index.php/fuck" target="_blank" rel="external">http://127.0.0.66/index.php/fuck</a></p><p>注意：如果要配置域名地址进行映射要指向 <code>public/index.php</code> 文件<br><img src="/img/composer-3-2.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;路由选择安装&quot;&gt;&lt;a href=&quot;#路由选择安装&quot; class=&quot;headerlink&quot; title=&quot;路由选择安装&quot;&gt;&lt;/a&gt;路由选择安装&lt;/h2&gt;&lt;p&gt;本节开始构建路由，先去 GitHub 搜一下：&lt;a href=&quot;https://github.com/sea
      
    
    </summary>
    
      <category term="composer使用" scheme="https://zhipenwang.github.io/categories/composer%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="Composer" scheme="https://zhipenwang.github.io/tags/Composer/"/>
    
  </entry>
  
  <entry>
    <title>Hexo NexT主题内接入网页在线联系功能</title>
    <link href="https://zhipenwang.github.io/2017/04/20/connect/"/>
    <id>https://zhipenwang.github.io/2017/04/20/connect/</id>
    <published>2017-04-20T11:12:49.000Z</published>
    <updated>2018-03-28T10:28:36.137Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo博客如何添加在线联系功能呢,发现了一个不错的网站可以提供在线联系的服务，当有用户在网页上给你留言后会通过邮件或者微信通知你，可以及时的解答用户的疑问。</p><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><p>首先在(DaoVoice)[<a href="http://www.daovoice.io/]注册个账号。" target="_blank" rel="external">http://www.daovoice.io/]注册个账号。</a><br>登录上去之后进行配置，配置方法如下:<br>首先到DaoVoice上注册一个账号,注册完成后会得到一个app_id，获取appid的步骤如下图所示:<br><img src="/img/daovoice.png" alt=""></p><p>以next主题为例,打开/themes/next/layout/_partials/head.swig文件添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;% if theme.daovoice %&#125;</div><div class="line">  &lt;script&gt;</div><div class="line">  (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&apos;https:&apos; == document.location.protocol ? &apos;https:&apos; : &apos;http:&apos;) + &quot;//widget.daovoice.io/widget/0f81ff2f.js&quot;,&quot;daovoice&quot;)</div><div class="line">  daovoice(&apos;init&apos;, &#123;</div><div class="line">      app_id: &quot;&#123;&#123;theme.daovoice_app_id&#125;&#125;&quot;</div><div class="line">    &#125;);</div><div class="line">  daovoice(&apos;update&apos;);</div><div class="line">  &lt;/script&gt;</div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure></p><p>接着打开主题配置文件_config.yml，添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># Online contact </div><div class="line">daovoice: true</div><div class="line">daovoice_app_id: 这里输入前面获取的app_id</div></pre></td></tr></table></figure></p><p>需要注意的是,next主题下聊天的按钮会和其他按钮重叠到一起，可以到聊天设置，修改下按钮的位置:<br><img src="/img/chat.png" alt=""><br>最后到右上角选择管理员，微信绑定,可以绑定你的微信号，关注公众号后打开小程序，就可以实时收发消息，有新的消息也会通过微信通知，设置页面如下:<br><img src="/img/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Hexo博客如何添加在线联系功能呢,发现了一个不错的网站可以提供在线联系的服务，当有用户在网页上给你留言后会通过邮件或者微信通知你，可以及时的解答用户的疑问。&lt;/p&gt;
&lt;h3 id=&quot;注册&quot;&gt;&lt;a href=&quot;#注册&quot; class=&quot;headerlink&quot; title=&quot;注
      
    
    </summary>
    
      <category term="搭建博客" scheme="https://zhipenwang.github.io/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="hexo" scheme="https://zhipenwang.github.io/tags/hexo/"/>
    
      <category term="next" scheme="https://zhipenwang.github.io/tags/next/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加字数统计、阅读时长、浏览次数</title>
    <link href="https://zhipenwang.github.io/2017/04/19/blog_view/"/>
    <id>https://zhipenwang.github.io/2017/04/19/blog_view/</id>
    <published>2017-04-19T11:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.133Z</updated>
    
    <content type="html"><![CDATA[<h2 id="统计插件"><a href="#统计插件" class="headerlink" title="统计插件"></a>统计插件</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>NexT 主题默认已经集成了文章【浏览次数】、【字数统计】、【阅读时长】统计功能，如果我们需要使用，只需要修改主题配置文件 _config.yml 即可。如下所示：<br>配置浏览次数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">busuanzi_count:</div><div class="line">  # count values only if the other configs are false</div><div class="line">  enable: true</div><div class="line">  # custom uv span for the whole site</div><div class="line">  site_uv: true</div><div class="line">  site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 访问人数</div><div class="line">  site_uv_footer:</div><div class="line">  # custom pv span for the whole site</div><div class="line">  site_pv: true</div><div class="line">  site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; 总访问量</div><div class="line">  site_pv_footer:</div><div class="line">  # custom pv span for one page only</div><div class="line">  page_pv: true</div><div class="line">  page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; 浏览</div><div class="line">  page_pv_footer: 次</div></pre></td></tr></table></figure></p><p>配置字数统计、阅读时长，wordcount与min2read统计功能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Post wordcount display settings</div><div class="line"># Dependencies: https://github.com/willin/hexo-wordcount</div><div class="line">post_wordcount:</div><div class="line">  item_text: true</div><div class="line">  wordcount: true         # 单篇 字数统计</div><div class="line">  min2read: true          # 单篇 阅读时长</div><div class="line">  totalcount: false       # 网站 字数统计</div><div class="line">  separated_meta: true</div></pre></td></tr></table></figure></p><p>预览的时候如果出现字数统计和阅读时长失效的情况，一般是因为没有安装 hexo-wordcount 插件，查看 Hexo 插件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hexo --debug</div><div class="line">``</div><div class="line">### 安装</div><div class="line"></div><div class="line">如果没有安装 hexo-wordcount 插件，先安装该插件：</div></pre></td></tr></table></figure></p><p>npm i –save hexo-wordcount<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">*** Node 版本 7.6.0 之前,请安装 2.x 版本 (Node.js v7.6.0 and previous) ，安装命令如下：***</div></pre></td></tr></table></figure></p><p>npm install hexo-wordcount@2 –save<br>```<br>安装完成后，重新执行启动服务预览就可以了。</p><h3 id="显示文字"><a href="#显示文字" class="headerlink" title="显示文字"></a>显示文字</h3><p>打开<code>post.swig</code>文件，路径如下：<code>xxx_blog/themes/next/layout/_macro/post.swig</code></p><p><img src="/img/view_count.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;统计插件&quot;&gt;&lt;a href=&quot;#统计插件&quot; class=&quot;headerlink&quot; title=&quot;统计插件&quot;&gt;&lt;/a&gt;统计插件&lt;/h2&gt;&lt;h3 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h
      
    
    </summary>
    
      <category term="搭建博客" scheme="https://zhipenwang.github.io/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="hexo" scheme="https://zhipenwang.github.io/tags/hexo/"/>
    
      <category term="next" scheme="https://zhipenwang.github.io/tags/next/"/>
    
  </entry>
  
  <entry>
    <title>Hexo NexT主题内给每篇文章后添加结束标语</title>
    <link href="https://zhipenwang.github.io/2017/04/18/hexo_next_end/"/>
    <id>https://zhipenwang.github.io/2017/04/18/hexo_next_end/</id>
    <published>2017-04-18T11:21:01.000Z</published>
    <updated>2018-03-28T10:28:36.138Z</updated>
    
    <content type="html"><![CDATA[<p>给文章后面添加结束标语</p><h3 id="新建文件"><a href="#新建文件" class="headerlink" title="新建文件"></a>新建文件</h3><p>在<code>\themes\next\layout\_macro</code>中新建<code>passage-end-tag.swig</code>文件，添加代码至该文件中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">    &#123;% if not is_index %&#125;</div><div class="line">        &lt;div style=&quot;text-align:center;color: #ccc;font-size:22px;&quot;&gt;-------------本文结束&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;感谢您的阅读-------------&lt;/div&gt;</div><div class="line">    &#123;% endif %&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p><h3 id="修改post-swig"><a href="#修改post-swig" class="headerlink" title="修改post.swig"></a>修改post.swig</h3><p>打开\themes\next\layout_macro\post.swig文件，在post-body后，post-footer前，添加下面内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  &#123;% if not is_index %&#125;</div><div class="line">    &#123;% include &apos;passage-end-tag.swig&apos; %&#125;</div><div class="line">  &#123;% endif %&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p><h3 id="修改-config"><a href="#修改-config" class="headerlink" title="修改_config"></a>修改_config</h3><p>打开主题配置文件（_config.yml),在末尾添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 文章末尾添加“本文结束”标记</div><div class="line">passage_end_tag:</div><div class="line">  enabled: true</div></pre></td></tr></table></figure></p><p>至此，就完成了关于添加文章结束标语的功能，具体的效果，此刻，想必你也看到了，就在下边。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;给文章后面添加结束标语&lt;/p&gt;
&lt;h3 id=&quot;新建文件&quot;&gt;&lt;a href=&quot;#新建文件&quot; class=&quot;headerlink&quot; title=&quot;新建文件&quot;&gt;&lt;/a&gt;新建文件&lt;/h3&gt;&lt;p&gt;在&lt;code&gt;\themes\next\layout\_macro&lt;/code&gt;中新建
      
    
    </summary>
    
      <category term="搭建博客" scheme="https://zhipenwang.github.io/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="hexo" scheme="https://zhipenwang.github.io/tags/hexo/"/>
    
      <category term="next" scheme="https://zhipenwang.github.io/tags/next/"/>
    
  </entry>
  
</feed>
